<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Kahokuä¸¶æ‡’`Blong</title>
  <icon>https://www.gravatar.com/avatar/4be4e7cb96975b93d296721d3973e199</icon>
  <subtitle>æ­¤äººæå…¶æ‡’ï¼Œè¯·å‹¿æœŸå¾…æ›´æ–°â€¦â€¦</subtitle>
  <link href="https://acgnliu.github.io/atom.xml" rel="self"/>
  
  <link href="https://acgnliu.github.io/"/>
  <updated>2023-03-16T13:24:22.624Z</updated>
  <id>https://acgnliu.github.io/</id>
  
  <author>
    <name>åˆ˜æ˜Ÿå®‡</name>
    <email>283977856@qq.com</email>
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>yolov5:æ¨¡å‹æ¨ç†ä¸ä½¿ç”¨</title>
    <link href="https://acgnliu.github.io/posts/9b5de9ab.html"/>
    <id>https://acgnliu.github.io/posts/9b5de9ab.html</id>
    <published>2023-03-16T13:21:29.000Z</published>
    <updated>2023-03-16T13:24:22.624Z</updated>
    
    <content type="html"><![CDATA[<h1 id="YOLO-ä½¿ç”¨detect-py-æ¨ç†æ¨¡å‹"><a href="#YOLO-ä½¿ç”¨detect-py-æ¨ç†æ¨¡å‹" class="headerlink" title="YOLO: ä½¿ç”¨detect.py æ¨ç†æ¨¡å‹"></a>YOLO: ä½¿ç”¨detect.py æ¨ç†æ¨¡å‹</h1><h3 id="ä¸€ã€æ¨¡å‹æ¨ç†åŸºæœ¬å‘½ä»¤"><a href="#ä¸€ã€æ¨¡å‹æ¨ç†åŸºæœ¬å‘½ä»¤" class="headerlink" title="ä¸€ã€æ¨¡å‹æ¨ç†åŸºæœ¬å‘½ä»¤"></a>ä¸€ã€æ¨¡å‹æ¨ç†åŸºæœ¬å‘½ä»¤</h3><ol><li><p><code>bash</code><strong>å‘½ä»¤</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ§åˆ¶å°æŒ‡ä»¤</span></span><br><span class="line">python detect.py  --weights <span class="string">&quot;æ¨¡å‹æ–‡ä»¶&quot;</span> --<span class="built_in">source</span> <span class="string">&quot;è¾“å…¥æ–‡ä»¶&quot;</span> --class_dir <span class="string">&quot;è¾“å‡ºæ–‡ä»¶&quot;</span> --conf-thres 0.8</span><br></pre></td></tr></table></figure></li><li><p><strong>å‘½ä»¤è§£æ</strong></p><ul><li><p><code>detect.py</code>:  pythonè¿è¡Œçš„pyæ–‡ä»¶åç§°</p></li><li><p><code>--weights</code>ï¼š éœ€è¦æ¨ç†çš„æ¨¡å‹æ–‡ä»¶è·¯å¾„</p></li><li><p><code>--source</code>ï¼š æ¨ç†æ‰€éœ€è¦çš„è¾“å…¥å›¾ç‰‡è·¯å¾„</p></li><li><p><code>--conf-thres:</code> ç½®ä¿¡åº¦é˜ˆå€¼ï¼Œå»ºè®®åˆå§‹è®¾ç½®ä¸º0.8</p></li><li><p><code>--class_dir</code>ï¼š æ¨¡å‹æ¨ç†åè¾“å‡ºæ–‡ä»¶è·¯å¾„<strong>ï¼ˆæ–°å¢å‚æ•°ï¼‰</strong></p></li></ul></li></ol><h3 id="äºŒã€detect-py-è®­ç»ƒå‚æ•°è§£æ"><a href="#äºŒã€detect-py-è®­ç»ƒå‚æ•°è§£æ" class="headerlink" title="äºŒã€detect.py è®­ç»ƒå‚æ•°è§£æ"></a>äºŒã€detect.py è®­ç»ƒå‚æ•°è§£æ</h3><ol><li><p><strong>æ§åˆ¶å°å¸¸ç”¨è¾“å…¥å‚æ•°è§£æ</strong>ï¼š</p><ul><li><code>weights:</code>  æ¨¡å‹æ–‡ä»¶ï¼ˆbest.ptï¼‰</li><li><code>source:</code>  æ¨¡å‹è¾“å…¥çš„æ•°æ®ï¼Œç±»å‹æ”¯æŒå›¾ç‰‡ã€è§†é¢‘ä¸æ‘„åƒå¤´ï¼ˆæ‘„åƒå¤´ï¼š0ï¼‰ä»¥åŠæ˜¯rtspç­‰è§†é¢‘æµ,ã€‚</li><li><code>imgsz:</code> ç½‘ç»œè¾“å…¥å›¾ç‰‡å¤§å°, é»˜è®¤çš„å¤§å°æ˜¯640</li><li><code>conf-thres:</code> ç½®ä¿¡åº¦é˜ˆå€¼ï¼Œ é»˜è®¤ä¸º0.25</li><li><code>max-det:</code> ä¿ç•™çš„æœ€å¤§æ£€æµ‹æ¡†æ•°é‡, æ¯å¼ å›¾ç‰‡ä¸­æ£€æµ‹ç›®æ ‡çš„ä¸ªæ•°æœ€å¤šä¸º1000ç±»ã€</li><li><code>device:</code> è®¾ç½®è®¾å¤‡CPU/CUDA, å¯ä»¥ä¸ç”¨è®¾ç½®</li><li><code>save-txt:</code> æ˜¯å¦å°†é¢„æµ‹çš„æ¡†åæ ‡ä»¥txtæ–‡ä»¶å½¢å¼ä¿å­˜, é»˜è®¤False, ä½¿ç”¨â€”save-txt åœ¨è·¯å¾„runs/detect/exp<em>/labels/</em>.txtä¸‹ç”Ÿæˆæ¯å¼ å›¾ç‰‡é¢„æµ‹çš„txtæ–‡ä»¶</li><li><code>save-conf:</code> æ˜¯å¦å°†ç½®ä¿¡åº¦confä¹Ÿä¿å­˜åˆ°txtä¸­, é»˜è®¤False</li><li><code>classes:</code> è®¾ç½®åªä¿ç•™æŸä¸€éƒ¨åˆ†ç±»åˆ«, å½¢å¦‚0æˆ–è€…0 2 3, ä½¿ç”¨â€”classes = n, åˆ™åœ¨è·¯å¾„runs/detect/exp*/ä¸‹ä¿å­˜çš„å›¾ç‰‡ä¸ºnæ‰€å¯¹åº”çš„ç±»åˆ«, æ­¤æ—¶éœ€è¦è®¾ç½®data</li></ul></li><li><p><code>detect.py</code> <strong>æ‰€æœ‰å‚æ•°è¯´æ˜</strong> </p><ul><li><p><code>weights:</code> è®­ç»ƒçš„æƒé‡è·¯å¾„,å¯ä»¥ä½¿ç”¨è‡ªå·±è®­ç»ƒçš„æƒé‡,ä¹Ÿå¯ä»¥ä½¿ç”¨å®˜ç½‘æä¾›çš„æƒé‡ é»˜è®¤å®˜ç½‘çš„æƒé‡yolov5s.pt(yolov5n.pt/yolov5s.pt/yolov5m.pt/yolov5l.pt/yolov5x.pt/åŒºåˆ«åœ¨äºç½‘ç»œçš„å®½åº¦å’Œæ·±åº¦ä»¥æ­¤å¢åŠ )</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ython path/to/detect.py --weights yolov5s.pt                 # PyTorch</span><br><span class="line">                                   yolov5s.torchscript        # TorchScript</span><br><span class="line">                                   yolov5s.onnx               # ONNX Runtime or OpenCV DNN with --dnn</span><br><span class="line">                                   yolov5s.xml                # OpenVINO</span><br><span class="line">                                    yolov5s.engine             # TensorRT</span><br><span class="line">                                    yolov5s.mlmodel            # CoreML (MacOS-only)</span><br><span class="line">                                    yolov5s_saved_model        # TensorFlow SavedModel</span><br><span class="line">                                    yolov5s.pb                 # TensorFlow GraphDef</span><br><span class="line">                                    yolov5s.tflite             # TensorFlow Lite</span><br><span class="line">                                    yolov5s_edgetpu.tflite     # TensorFlow Edge TPU</span><br></pre></td></tr></table></figure></li></ul></li></ol><ul><li><p><code>source:</code> æµ‹è¯•æ•°æ®ï¼Œå¯ä»¥æ˜¯å›¾ç‰‡/è§†é¢‘è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯â€™0â€™(ç”µè„‘è‡ªå¸¦æ‘„åƒå¤´),ä¹Ÿå¯ä»¥æ˜¯rtspç­‰è§†é¢‘æµ, é»˜è®¤data/images</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">python path/to/detect.py --weights yolov5s.pt --source 0              # webcam # ç›´æ’­è½¯ä»¶/ç”µè„‘æ‘„åƒå¤´</span><br><span class="line">                                                       img.jpg        # image</span><br><span class="line">                                                       vid.mp4        # video</span><br><span class="line">                                                        path/          # directory</span><br><span class="line">                                                       path/*.jpg     # glob</span><br><span class="line">                                                       &#x27;https://youtu.be/Zgi9g1ksQHc&#x27;  # YouTube</span><br><span class="line">                                                        &#x27;rtsp://example.com/media.mp4&#x27;  # RTSP, </span><br></pre></td></tr></table></figure></li></ul><ul><li><p><code>data:</code> é…ç½®æ•°æ®æ–‡ä»¶è·¯å¾„, åŒ…æ‹¬image/label/classesç­‰ä¿¡æ¯, è®­ç»ƒè‡ªå·±çš„æ–‡ä»¶, éœ€è¦ä½œç›¸åº”æ›´æ”¹, å¯ä»¥ä¸ç”¨ç®¡</p><pre><code>å¦‚æœè®¾ç½®äº†åªæ˜¾ç¤ºä¸ªåˆ«ç±»åˆ«å³ä½¿ç”¨äº†--classes = 0 æˆ–äºŒè€…1, 2, 3ç­‰, åˆ™éœ€è¦è®¾ç½®è¯¥æ–‡ä»¶ï¼Œæ•°å­—å’Œç±»åˆ«ç›¸å¯¹åº”æ‰èƒ½åªæ£€æµ‹æŸä¸€ä¸ªç±»</code></pre></li><li><p><code>imgsz:</code> ç½‘ç»œè¾“å…¥å›¾ç‰‡å¤§å°, é»˜è®¤çš„å¤§å°æ˜¯640</p></li><li><p><code>conf-thres:</code> ç½®ä¿¡åº¦é˜ˆå€¼ï¼Œ é»˜è®¤ä¸º0.25</p></li><li><p><code>iou-thres:</code>  åšnmsçš„ioué˜ˆå€¼, é»˜è®¤ä¸º0.45</p></li><li><p><code>max-det:</code> ä¿ç•™çš„æœ€å¤§æ£€æµ‹æ¡†æ•°é‡, æ¯å¼ å›¾ç‰‡ä¸­æ£€æµ‹ç›®æ ‡çš„ä¸ªæ•°æœ€å¤šä¸º1000ç±»</p></li><li><p><code>device:</code> è®¾ç½®è®¾å¤‡CPU/CUDA, å¯ä»¥ä¸ç”¨è®¾ç½®</p></li><li><p><code>view-img:</code> æ˜¯å¦å±•ç¤ºé¢„æµ‹ä¹‹åçš„å›¾ç‰‡/è§†é¢‘, é»˜è®¤False, â€”view-img ç”µè„‘ç•Œé¢å‡ºç°å›¾ç‰‡æˆ–è€…è§†é¢‘æ£€æµ‹ç»“æœ</p></li><li><p><code>save-txt:</code> æ˜¯å¦å°†é¢„æµ‹çš„æ¡†åæ ‡ä»¥txtæ–‡ä»¶å½¢å¼ä¿å­˜, é»˜è®¤False, ä½¿ç”¨â€”save-txt åœ¨è·¯å¾„runs/detect/exp<em>/labels/</em>.txtä¸‹ç”Ÿæˆæ¯å¼ å›¾ç‰‡é¢„æµ‹çš„txtæ–‡ä»¶</p></li><li><p><code>save-conf:</code> æ˜¯å¦å°†ç½®ä¿¡åº¦confä¹Ÿä¿å­˜åˆ°txtä¸­, é»˜è®¤False</p></li><li><p><code>save-crop:</code> æ˜¯å¦ä¿å­˜è£å‰ªé¢„æµ‹æ¡†å›¾ç‰‡, é»˜è®¤ä¸ºFalse, ä½¿ç”¨â€”save-crop åœ¨runs/detect/exp*/crop/å‰ªåˆ‡ç±»åˆ«æ–‡ä»¶å¤¹/ è·¯å¾„ä¸‹ä¼šä¿å­˜æ¯ä¸ªæ¥ä¸‹æ¥çš„ç›®æ ‡</p></li><li><p><code>nosave:</code> ä¸ä¿å­˜å›¾ç‰‡ã€è§†é¢‘, è¦ä¿å­˜å›¾ç‰‡ï¼Œä¸è®¾ç½®â€”nosave åœ¨runs/detect/exp*/ä¼šå‡ºç°é¢„æµ‹çš„ç»“æœ</p></li><li><p><code>classes:</code> è®¾ç½®åªä¿ç•™æŸä¸€éƒ¨åˆ†ç±»åˆ«, å½¢å¦‚0æˆ–è€…0 2 3, ä½¿ç”¨â€”classes = n, åˆ™åœ¨è·¯å¾„runs/detect/exp*/ä¸‹ä¿å­˜çš„å›¾ç‰‡ä¸ºnæ‰€å¯¹åº”çš„ç±»åˆ«, æ­¤æ—¶éœ€è¦è®¾ç½®data</p></li><li><p><code>agnostic-nms:</code> è¿›è¡ŒNMSå»é™¤ä¸åŒç±»åˆ«ä¹‹é—´çš„æ¡†, é»˜è®¤False</p></li><li><p><code>augment:</code> TTAæµ‹è¯•æ—¶å¢å¼º/å¤šå°ºåº¦é¢„æµ‹</p></li><li><p><code>visualize:</code> æ˜¯å¦å¯è§†åŒ–ç½‘ç»œå±‚è¾“å‡ºç‰¹å¾</p></li><li><p><code>update:</code> å¦‚æœä¸ºTrue,åˆ™å¯¹æ‰€æœ‰æ¨¡å‹è¿›è¡Œstrip_optimizeræ“ä½œ,å»é™¤ptæ–‡ä»¶ä¸­çš„ä¼˜åŒ–å™¨ç­‰ä¿¡æ¯,é»˜è®¤ä¸ºFalse</p></li><li><p><code>project:</code>ä¿å­˜æµ‹è¯•æ—¥å¿—çš„æ–‡ä»¶å¤¹è·¯å¾„</p></li><li><p><code>name:</code>ä¿å­˜æµ‹è¯•æ—¥å¿—æ–‡ä»¶å¤¹çš„åå­—, æ‰€ä»¥æœ€ç»ˆæ˜¯ä¿å­˜åœ¨project/nameä¸­</p></li><li><p><code>exist_ok:</code> æ˜¯å¦é‡æ–°åˆ›å»ºæ—¥å¿—æ–‡ä»¶, Falseæ—¶é‡æ–°åˆ›å»ºæ–‡ä»¶</p></li><li><p><code>line-thickness:</code> ç”»æ¡†çš„çº¿æ¡ç²—ç»†</p></li><li><p><code>hide-labels:</code> å¯è§†åŒ–æ—¶éšè—é¢„æµ‹ç±»åˆ«</p></li><li><p><code>hide-conf:</code> å¯è§†åŒ–æ—¶éšè—ç½®ä¿¡åº¦</p></li><li><p><code>half:</code> æ˜¯å¦ä½¿ç”¨F16ç²¾åº¦æ¨ç†, åŠè¿›åº¦æé«˜æ£€æµ‹é€Ÿåº¦</p></li><li><p><code>dnn:</code> ç”¨OpenCV DNNé¢„æµ‹</p></li><li><p><code>vid-stride:</code>  è®¾ç½®è§†é¢‘å¸§ç‡  <strong>ï¼ˆæ–°ç‰ˆæœ¬å‚æ•°ï¼‰</strong></p></li></ul><h3 id="ä¸‰ã€detect-py-æºç å‡½æ•°è§£æ"><a href="#ä¸‰ã€detect-py-æºç å‡½æ•°è§£æ" class="headerlink" title="ä¸‰ã€detect.py æºç å‡½æ•°è§£æ"></a>ä¸‰ã€detect.py æºç å‡½æ•°è§£æ</h3><ol><li><p>detect.py ä»£ç è§£æ<a href="https://github.com/ultralytics/yolov5/blob/master/detect.py">githubé¡¹ç›®åœ°å€</a>ï¼Œå‚è€ƒ<a href="https://blog.csdn.net/CharmsLUO/article/details/123422822?spm=1001.2014.3001.5506">ä»£ç æ³¨é‡Šå‚è€ƒ</a> <a href="https://blog.csdn.net/CharmsLUO">Charms@</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># YOLOv5 ğŸš€ by Ultralytics, GPL-3.0 license</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;Run inference on images, videos, directories, streams, etc.&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.backends.cudnn <span class="keyword">as</span> cudnn</span><br><span class="line"></span><br><span class="line">FILE = Path(__file__).resolve()</span><br><span class="line">ROOT = FILE.parents[<span class="number">0</span>]  <span class="comment"># YOLOv5 root directory</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">str</span>(ROOT) <span class="keyword">not</span> <span class="keyword">in</span> sys.path:</span><br><span class="line">    sys.path.append(<span class="built_in">str</span>(ROOT))  <span class="comment"># add ROOT to PATH</span></span><br><span class="line">ROOT = Path(os.path.relpath(ROOT, Path.cwd()))  <span class="comment"># relative</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> models.common <span class="keyword">import</span> DetectMultiBackend</span><br><span class="line"><span class="keyword">from</span> utils.datasets <span class="keyword">import</span> IMG_FORMATS, VID_FORMATS, LoadImages, LoadStreams</span><br><span class="line"><span class="keyword">from</span> utils.general <span class="keyword">import</span> (LOGGER, check_file, check_img_size, check_imshow, check_requirements, colorstr,</span><br><span class="line">                           increment_path, non_max_suppression, print_args, scale_coords, strip_optimizer, xyxy2xywh)</span><br><span class="line"><span class="keyword">from</span> utils.plots <span class="keyword">import</span> Annotator, colors, save_one_box</span><br><span class="line"><span class="keyword">from</span> utils.torch_utils <span class="keyword">import</span> select_device, time_sync</span><br><span class="line"></span><br><span class="line"><span class="comment"># é¢„æµ‹ä¸æ›´æ–°æ¢¯åº¦</span></span><br><span class="line"><span class="meta">@torch.no_grad()</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">weights=ROOT / <span class="string">&#x27;yolov5s.pt&#x27;</span>,  <span class="comment"># model.pt path(s) # æƒé‡æ–‡ä»¶åœ°å€ é»˜è®¤ weights/å¯ä»¥æ˜¯è‡ªå·±çš„è·¯å¾„</span></span></span><br><span class="line"><span class="params">        source=ROOT / <span class="string">&#x27;data/images&#x27;</span>,  <span class="comment"># file/dir/URL/glob, 0 for webcam 0 è‡ªå¸¦ç”µè„‘æ‘„åƒå¤´ï¼Œ é»˜è®¤data/images/</span></span></span><br><span class="line"><span class="params">        data=ROOT / <span class="string">&#x27;data/coco128.yaml&#x27;</span>,  <span class="comment"># dataset.yaml path, dataæ–‡ä»¶è·¯å¾„ï¼ŒåŒ…æ‹¬ç±»åˆ«/å›¾ç‰‡/æ ‡ç­¾ç­‰ä¿¡æ¯</span></span></span><br><span class="line"><span class="params">        imgsz=(<span class="params"><span class="number">640</span>, <span class="number">640</span></span>),  <span class="comment"># inference size (height, width) è¾“å…¥å›¾ç‰‡çš„å¤§å° é»˜è®¤640*640</span></span></span><br><span class="line"><span class="params">        conf_thres=<span class="number">0.25</span>,  <span class="comment"># confidence threshold # objectç½®ä¿¡åº¦é˜ˆå€¼ é»˜è®¤0.25  ç”¨åœ¨nmsä¸­</span></span></span><br><span class="line"><span class="params">        iou_thres=<span class="number">0.45</span>,  <span class="comment"># NMS IOU threshold # åšnmsçš„ioué˜ˆå€¼ é»˜è®¤0.45   ç”¨åœ¨nmsä¸­</span></span></span><br><span class="line"><span class="params">        max_det=<span class="number">1000</span>,  <span class="comment"># maximum detections per image æ¯å¼ å›¾ç‰‡æœ€å¤šçš„ç›®æ ‡æ•°é‡  ç”¨åœ¨nmsä¸­ </span></span></span><br><span class="line"><span class="params">        device=<span class="string">&#x27;&#x27;</span>,  <span class="comment"># cuda device, i.e. 0 or 0,1,2,3 or cpu è®¾ç½®ä»£ç æ‰§è¡Œçš„è®¾å¤‡ cuda device, i.e. 0 or 0,1,2,3 or cpu</span></span></span><br><span class="line"><span class="params">        view_img=<span class="literal">False</span>,  <span class="comment"># show results æ˜¯å¦å±•ç¤ºé¢„æµ‹ä¹‹åçš„å›¾ç‰‡æˆ–è§†é¢‘ é»˜è®¤False </span></span></span><br><span class="line"><span class="params">        save_txt=<span class="literal">False</span>,  <span class="comment"># save results to *.txt æ˜¯å¦å°†é¢„æµ‹çš„æ¡†åæ ‡ä»¥txtæ–‡ä»¶å½¢å¼ä¿å­˜, é»˜è®¤False, ä½¿ç”¨--save-txt åœ¨è·¯å¾„runs/detect/exp*/labels/*.txtä¸‹ç”Ÿæˆæ¯å¼ å›¾ç‰‡é¢„æµ‹çš„txtæ–‡ä»¶</span></span></span><br><span class="line"><span class="params">        save_conf=<span class="literal">False</span>,  <span class="comment"># save confidences in --save-txt labels æ˜¯å¦å°†ç½®ä¿¡åº¦confä¹Ÿä¿å­˜åˆ°txtä¸­, é»˜è®¤False</span></span></span><br><span class="line"><span class="params">        save_crop=<span class="literal">False</span>,  <span class="comment"># save cropped prediction boxes æ˜¯å¦ä¿å­˜è£å‰ªé¢„æµ‹æ¡†å›¾ç‰‡, é»˜è®¤ä¸ºFalse, ä½¿ç”¨--save-crop åœ¨runs/detect/exp*/crop/å‰ªåˆ‡ç±»åˆ«æ–‡ä»¶å¤¹/ è·¯å¾„ä¸‹ä¼šä¿å­˜æ¯ä¸ªæ¥ä¸‹æ¥çš„ç›®æ ‡</span></span></span><br><span class="line"><span class="params">        nosave=<span class="literal">False</span>,  <span class="comment"># do not save images/videos ä¸ä¿å­˜å›¾ç‰‡ã€è§†é¢‘, è¦ä¿å­˜å›¾ç‰‡ï¼Œä¸è®¾ç½®--nosave åœ¨runs/detect/exp*/ä¼šå‡ºç°é¢„æµ‹çš„ç»“æœ</span></span></span><br><span class="line"><span class="params">        classes=<span class="literal">None</span>,  <span class="comment"># filter by class: --class 0, or --class 0 2 3 è®¾ç½®åªä¿ç•™æŸä¸€éƒ¨åˆ†ç±»åˆ«, å½¢å¦‚0æˆ–è€…0 2 3, ä½¿ç”¨--classes = n, åˆ™åœ¨è·¯å¾„runs/detect/exp*/ä¸‹ä¿å­˜çš„å›¾ç‰‡ä¸ºnæ‰€å¯¹åº”çš„ç±»åˆ«, æ­¤æ—¶éœ€è¦è®¾ç½®data</span></span></span><br><span class="line"><span class="params">        agnostic_nms=<span class="literal">False</span>,  <span class="comment"># class-agnostic NMS è¿›è¡ŒNMSå»é™¤ä¸åŒç±»åˆ«ä¹‹é—´çš„æ¡†, é»˜è®¤False</span></span></span><br><span class="line"><span class="params">        augment=<span class="literal">False</span>,  <span class="comment"># augmented inference TTAæµ‹è¯•æ—¶å¢å¼º/å¤šå°ºåº¦é¢„æµ‹ï¼Œå¯ä»¥æåˆ†</span></span></span><br><span class="line"><span class="params">        visualize=<span class="literal">False</span>,  <span class="comment"># visualize features æ˜¯å¦å¯è§†åŒ–ç½‘ç»œå±‚è¾“å‡ºç‰¹å¾</span></span></span><br><span class="line"><span class="params">        update=<span class="literal">False</span>,  <span class="comment"># update all models å¦‚æœä¸ºTrue,åˆ™å¯¹æ‰€æœ‰æ¨¡å‹è¿›è¡Œstrip_optimizeræ“ä½œ,å»é™¤ptæ–‡ä»¶ä¸­çš„ä¼˜åŒ–å™¨ç­‰ä¿¡æ¯,é»˜è®¤ä¸ºFalse</span></span></span><br><span class="line"><span class="params">        project=ROOT / <span class="string">&#x27;runs/detect&#x27;</span>,  <span class="comment"># save results to project/name ä¿å­˜æµ‹è¯•æ—¥å¿—çš„æ–‡ä»¶å¤¹è·¯å¾„</span></span></span><br><span class="line"><span class="params">        name=<span class="string">&#x27;exp&#x27;</span>,  <span class="comment"># save results to project/name æ¯æ¬¡å®éªŒçš„åç§°</span></span></span><br><span class="line"><span class="params">        exist_ok=<span class="literal">False</span>,  <span class="comment"># existing project/name ok, do not increment æ˜¯å¦é‡æ–°åˆ›å»ºæ—¥å¿—æ–‡ä»¶, Falseæ—¶é‡æ–°åˆ›å»ºæ–‡ä»¶</span></span></span><br><span class="line"><span class="params">        line_thickness=<span class="number">3</span>,  <span class="comment"># bounding box thickness (pixels) ç”»æ¡†çš„çº¿æ¡ç²—ç»†</span></span></span><br><span class="line"><span class="params">        hide_labels=<span class="literal">False</span>,  <span class="comment"># hide labels å¯è§†åŒ–æ—¶éšè—é¢„æµ‹ç±»åˆ«</span></span></span><br><span class="line"><span class="params">        hide_conf=<span class="literal">False</span>,  <span class="comment"># hide confidences å¯è§†åŒ–æ—¶éšè—ç½®ä¿¡åº¦</span></span></span><br><span class="line"><span class="params">        half=<span class="literal">False</span>,  <span class="comment"># use FP16 half-precision inference æ˜¯å¦ä½¿ç”¨F16ç²¾åº¦æ¨ç†, åŠè¿›åº¦æé«˜æ£€æµ‹é€Ÿåº¦</span></span></span><br><span class="line"><span class="params">        dnn=<span class="literal">False</span>,  <span class="comment"># use OpenCV DNN for ONNX inference ç”¨OpenCV DNNé¢„æµ‹</span></span></span><br><span class="line"><span class="params">        </span>):</span><br><span class="line">    <span class="comment">################################################# 1. åˆå§‹åŒ–é…ç½® #####################################################</span></span><br><span class="line">    <span class="comment"># è¾“å…¥çš„è·¯å¾„å˜ä¸ºå­—ç¬¦ä¸²</span></span><br><span class="line">    source = <span class="built_in">str</span>(source)</span><br><span class="line">    <span class="comment"># æ˜¯å¦ä¿å­˜å›¾ç‰‡å’Œtxtæ–‡ä»¶</span></span><br><span class="line">    save_img = <span class="keyword">not</span> nosave <span class="keyword">and</span> <span class="keyword">not</span> source.endswith(<span class="string">&#x27;.txt&#x27;</span>)  <span class="comment"># save inference images</span></span><br><span class="line">    <span class="comment"># åˆ¤æ–­æ–‡ä»¶æ˜¯å¦æ˜¯è§†é¢‘æµ</span></span><br><span class="line">    <span class="comment"># Path()æå–æ–‡ä»¶å ä¾‹å¦‚ï¼šPath(&quot;./data/test_images/bus.jpg&quot;) Path.name-&gt;bus.jpg Path.parent-&gt;./data/test_images Path.suffix-&gt;.jpg</span></span><br><span class="line">    is_file = Path(source).suffix[<span class="number">1</span>:] <span class="keyword">in</span> (IMG_FORMATS + VID_FORMATS) <span class="comment"># æå–æ–‡ä»¶åç¼€åæ˜¯å¦ç¬¦åˆè¦æ±‚çš„æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼šæ˜¯å¦æ ¼å¼æ˜¯jpg, png, asf, aviç­‰</span></span><br><span class="line">    <span class="comment"># .lower()è½¬åŒ–æˆå°å†™ .upper()è½¬åŒ–æˆå¤§å†™ .title()é¦–å­—ç¬¦è½¬åŒ–æˆå¤§å†™ï¼Œå…¶ä½™ä¸ºå°å†™, .startswith(&#x27;http://&#x27;)è¿”å›True or Flase</span></span><br><span class="line">    is_url = source.lower().startswith((<span class="string">&#x27;rtsp://&#x27;</span>, <span class="string">&#x27;rtmp://&#x27;</span>, <span class="string">&#x27;http://&#x27;</span>, <span class="string">&#x27;https://&#x27;</span>))</span><br><span class="line">    <span class="comment"># .isnumeric()æ˜¯å¦æ˜¯ç”±æ•°å­—ç»„æˆï¼Œè¿”å›True or False</span></span><br><span class="line">    webcam = source.isnumeric() <span class="keyword">or</span> source.endswith(<span class="string">&#x27;.txt&#x27;</span>) <span class="keyword">or</span> (is_url <span class="keyword">and</span> <span class="keyword">not</span> is_file)</span><br><span class="line">    <span class="keyword">if</span> is_url <span class="keyword">and</span> is_file:</span><br><span class="line">        <span class="comment"># è¿”å›æ–‡ä»¶</span></span><br><span class="line">        source = check_file(source)  <span class="comment"># download</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Directories</span></span><br><span class="line">    <span class="comment"># é¢„æµ‹è·¯å¾„æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨æ–°å»ºï¼ŒæŒ‰ç…§å®éªŒæ–‡ä»¶ä»¥æ­¤é€’å¢æ–°å»º</span></span><br><span class="line">    save_dir = increment_path(Path(project) / name, exist_ok=exist_ok)  <span class="comment"># increment run</span></span><br><span class="line">    (save_dir / <span class="string">&#x27;labels&#x27;</span> <span class="keyword">if</span> save_txt <span class="keyword">else</span> save_dir).mkdir(parents=<span class="literal">True</span>, exist_ok=<span class="literal">True</span>)  <span class="comment"># make dir</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Load model</span></span><br><span class="line">    <span class="comment"># è·å–è®¾å¤‡ CPU/CUDA</span></span><br><span class="line">    device = select_device(device)</span><br><span class="line">    <span class="comment"># æ£€æµ‹ç¼–è¯‘æ¡†æ¶PYTORCH/TENSORFLOW/TENSORRT</span></span><br><span class="line">    model = DetectMultiBackend(weights, device=device, dnn=dnn, data=data)</span><br><span class="line">    stride, names, pt, jit, onnx, engine = model.stride, model.names, model.pt, model.jit, model.onnx, model.engine</span><br><span class="line">    <span class="comment"># ç¡®ä¿è¾“å…¥å›¾ç‰‡çš„å°ºå¯¸imgszèƒ½æ•´é™¤stride=32 å¦‚æœä¸èƒ½åˆ™è°ƒæ•´ä¸ºèƒ½è¢«æ•´é™¤å¹¶è¿”å›</span></span><br><span class="line">    imgsz = check_img_size(imgsz, s=stride)  <span class="comment"># check image size</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Half</span></span><br><span class="line">    <span class="comment"># å¦‚æœä¸æ˜¯CPUï¼Œä½¿ç”¨åŠè¿›åº¦(å›¾ç‰‡åŠç²¾åº¦/æ¨¡å‹åŠç²¾åº¦)</span></span><br><span class="line">    half &amp;= (pt <span class="keyword">or</span> jit <span class="keyword">or</span> onnx <span class="keyword">or</span> engine) <span class="keyword">and</span> device.<span class="built_in">type</span> != <span class="string">&#x27;cpu&#x27;</span>  <span class="comment"># FP16 supported on limited backends with CUDA</span></span><br><span class="line">    <span class="keyword">if</span> pt <span class="keyword">or</span> jit:</span><br><span class="line">        model.model.half() <span class="keyword">if</span> half <span class="keyword">else</span> model.model.<span class="built_in">float</span>()</span><br><span class="line">    <span class="comment"># TENSORRTåŠ é€Ÿ</span></span><br><span class="line">    <span class="keyword">elif</span> engine <span class="keyword">and</span> model.trt_fp16_input != half:</span><br><span class="line">        LOGGER.info(<span class="string">&#x27;model &#x27;</span> + (</span><br><span class="line">            <span class="string">&#x27;requires&#x27;</span> <span class="keyword">if</span> model.trt_fp16_input <span class="keyword">else</span> <span class="string">&#x27;incompatible with&#x27;</span>) + <span class="string">&#x27; --half. Adjusting automatically.&#x27;</span>)</span><br><span class="line">        half = model.trt_fp16_input</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="comment">################################################# 2. åŠ è½½æ•°æ® #####################################################</span></span><br><span class="line">    <span class="comment"># Dataloader åŠ è½½æ•°æ®</span></span><br><span class="line">    <span class="comment"># ä½¿ç”¨è§†é¢‘æµæˆ–è€…é¡µé¢</span></span><br><span class="line">    <span class="keyword">if</span> webcam:</span><br><span class="line">        view_img = check_imshow()</span><br><span class="line">        cudnn.benchmark = <span class="literal">True</span>  <span class="comment"># set True to speed up constant image size inference</span></span><br><span class="line">        dataset = LoadStreams(source, img_size=imgsz, stride=stride, auto=pt)</span><br><span class="line">        bs = <span class="built_in">len</span>(dataset)  <span class="comment"># batch_size</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="comment"># ç›´æ¥ä»sourceæ–‡ä»¶ä¸‹è¯»å–å›¾ç‰‡</span></span><br><span class="line">        dataset = LoadImages(source, img_size=imgsz, stride=stride, auto=pt)</span><br><span class="line">        bs = <span class="number">1</span>  <span class="comment"># batch_size</span></span><br><span class="line">    <span class="comment"># ä¿å­˜çš„è·¯å¾„</span></span><br><span class="line">    vid_path, vid_writer = [<span class="literal">None</span>] * bs, [<span class="literal">None</span>] * bs</span><br><span class="line"></span><br><span class="line">    <span class="comment">################################################# 3. ç½‘ç»œé¢„æµ‹ #####################################################</span></span><br><span class="line">    <span class="comment"># Run inference</span></span><br><span class="line">    <span class="comment"># warmup çƒ­èº«</span></span><br><span class="line">    model.warmup(imgsz=(<span class="number">1</span> <span class="keyword">if</span> pt <span class="keyword">else</span> bs, <span class="number">3</span>, *imgsz), half=half)  <span class="comment"># warmup</span></span><br><span class="line">    dt, seen = [<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>], <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> path, im, im0s, vid_cap, s <span class="keyword">in</span> dataset:</span><br><span class="line">        t1 = time_sync()</span><br><span class="line">        <span class="comment"># è½¬åŒ–åˆ°GPUä¸Š</span></span><br><span class="line">        im = torch.from_numpy(im).to(device)</span><br><span class="line">        <span class="comment"># æ˜¯å¦ä½¿ç”¨åŠç²¾åº¦</span></span><br><span class="line">        im = im.half() <span class="keyword">if</span> half <span class="keyword">else</span> im.<span class="built_in">float</span>()  <span class="comment"># uint8 to fp16/32</span></span><br><span class="line">        im /= <span class="number">255</span>  <span class="comment"># 0 - 255 to 0.0 - 1.0</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(im.shape) == <span class="number">3</span>:</span><br><span class="line">            <span class="comment"># å¢åŠ ä¸€ä¸ªç»´åº¦</span></span><br><span class="line">            im = im[<span class="literal">None</span>]  <span class="comment"># expand for batch dim</span></span><br><span class="line">        t2 = time_sync()</span><br><span class="line">        dt[<span class="number">0</span>] += t2 - t1</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Inference</span></span><br><span class="line">        <span class="comment"># å¯æ˜¯åŒ–æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">        visualize = increment_path(save_dir / Path(path).stem, mkdir=<span class="literal">True</span>) <span class="keyword">if</span> visualize <span class="keyword">else</span> <span class="literal">False</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        pred.shape=(1, num_boxes, 5+num_class)</span></span><br><span class="line"><span class="string">        h,wä¸ºä¼ å…¥ç½‘ç»œå›¾ç‰‡çš„é•¿å’Œå®½,æ³¨æ„datasetåœ¨æ£€æµ‹æ—¶ä½¿ç”¨äº†çŸ©å½¢æ¨ç†,æ‰€ä»¥è¿™é‡Œhä¸ä¸€å®šç­‰äºw</span></span><br><span class="line"><span class="string">        num_boxes = h/32 * w/32 + h/16 * w/16 + h/8 * w/8</span></span><br><span class="line"><span class="string">        pred[..., 0:4]ä¸ºé¢„æµ‹æ¡†åæ ‡=é¢„æµ‹æ¡†åæ ‡ä¸ºxywh(ä¸­å¿ƒç‚¹+å®½é•¿)æ ¼å¼</span></span><br><span class="line"><span class="string">        pred[..., 4]ä¸ºobjectnessç½®ä¿¡åº¦</span></span><br><span class="line"><span class="string">        pred[..., 5:-1]ä¸ºåˆ†ç±»ç»“æœ</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        pred = model(im, augment=augment, visualize=visualize)</span><br><span class="line">        t3 = time_sync()</span><br><span class="line">        <span class="comment"># é¢„æµ‹çš„æ—¶é—´</span></span><br><span class="line">        dt[<span class="number">1</span>] += t3 - t2</span><br><span class="line"></span><br><span class="line">        <span class="comment"># NMS</span></span><br><span class="line">        <span class="comment"># éæå¤§å€¼æŠ‘åˆ¶</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        pred: ç½‘ç»œçš„è¾“å‡ºç»“æœ</span></span><br><span class="line"><span class="string">        conf_thres:ç½®ä¿¡åº¦é˜ˆå€¼</span></span><br><span class="line"><span class="string">        ou_thres:ioué˜ˆå€¼</span></span><br><span class="line"><span class="string">        classes: æ˜¯å¦åªä¿ç•™ç‰¹å®šçš„ç±»åˆ«</span></span><br><span class="line"><span class="string">        agnostic_nms: è¿›è¡Œnmsæ˜¯å¦ä¹Ÿå»é™¤ä¸åŒç±»åˆ«ä¹‹é—´çš„æ¡†</span></span><br><span class="line"><span class="string">        max-det: ä¿ç•™çš„æœ€å¤§æ£€æµ‹æ¡†æ•°é‡</span></span><br><span class="line"><span class="string">        ---NMS, é¢„æµ‹æ¡†æ ¼å¼: xywh(ä¸­å¿ƒç‚¹+é•¿å®½)--&gt;xyxy(å·¦ä¸Šè§’å³ä¸‹è§’)</span></span><br><span class="line"><span class="string">        predæ˜¯ä¸€ä¸ªåˆ—è¡¨list[torch.tensor], é•¿åº¦ä¸ºbatch_size</span></span><br><span class="line"><span class="string">        æ¯ä¸€ä¸ªtorch.tensorçš„shapeä¸º(num_boxes, 6), å†…å®¹ä¸ºbox + conf + cls</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        pred = non_max_suppression(pred, conf_thres, iou_thres, classes, agnostic_nms, max_det=max_det)</span><br><span class="line">        <span class="comment"># é¢„æµ‹+NMSçš„æ—¶é—´</span></span><br><span class="line">        dt[<span class="number">2</span>] += time_sync() - t3</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Second-stage classifier (optional)</span></span><br><span class="line">        <span class="comment"># pred = utils.general.apply_classifier(pred, classifier_model, im, im0s)</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># Process predictions</span></span><br><span class="line">        <span class="comment"># å¯¹æ¯å¼ å›¾ç‰‡åšå¤„ç†</span></span><br><span class="line">        <span class="keyword">for</span> i, det <span class="keyword">in</span> <span class="built_in">enumerate</span>(pred):  <span class="comment"># per image</span></span><br><span class="line">            seen += <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> webcam:  <span class="comment"># batch_size &gt;= 1</span></span><br><span class="line">                <span class="comment"># å¦‚æœè¾“å…¥æºæ˜¯webcamåˆ™batch_size&gt;=1 å–å‡ºdatasetä¸­çš„ä¸€å¼ å›¾ç‰‡</span></span><br><span class="line">                p, im0, frame = path[i], im0s[i].copy(), dataset.count</span><br><span class="line">                s += <span class="string">f&#x27;<span class="subst">&#123;i&#125;</span>: &#x27;</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="comment"># ä½†æ˜¯å¤§éƒ¨åˆ†æˆ‘ä»¬ä¸€èˆ¬éƒ½æ˜¯ä»LoadImagesæµè¯»å–æœ¬éƒ½æ–‡ä»¶ä¸­çš„ç…§ç‰‡æˆ–è€…è§†é¢‘ æ‰€ä»¥batch_size=1</span></span><br><span class="line">                <span class="comment"># p: å½“å‰å›¾ç‰‡/è§†é¢‘çš„ç»å¯¹è·¯å¾„ å¦‚ F:\yolo_v5\yolov5-U\data\images\bus.jpg</span></span><br><span class="line">                <span class="comment"># s: è¾“å‡ºä¿¡æ¯ åˆå§‹ä¸º &#x27;&#x27;</span></span><br><span class="line">                <span class="comment"># im0: åŸå§‹å›¾ç‰‡ letterbox + pad ä¹‹å‰çš„å›¾ç‰‡</span></span><br><span class="line">                <span class="comment"># frame: è§†é¢‘æµ</span></span><br><span class="line">                p, im0, frame = path, im0s.copy(), <span class="built_in">getattr</span>(dataset, <span class="string">&#x27;frame&#x27;</span>, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># å½“å‰è·¯å¾„yolov5/data/images/</span></span><br><span class="line">            p = Path(p)  <span class="comment"># to Path</span></span><br><span class="line">            <span class="comment"># å›¾ç‰‡/è§†é¢‘çš„ä¿å­˜è·¯å¾„save_path å¦‚ runs\\detect\\exp8\\bus.jpg</span></span><br><span class="line">            save_path = <span class="built_in">str</span>(save_dir / p.name)  <span class="comment"># im.jpg</span></span><br><span class="line">            <span class="comment"># è®¾ç½®ä¿å­˜æ¡†åæ ‡çš„txtæ–‡ä»¶è·¯å¾„ï¼Œæ¯å¼ å›¾ç‰‡å¯¹åº”ä¸€ä¸ªæ¡†åæ ‡ä¿¡æ¯</span></span><br><span class="line">            txt_path = <span class="built_in">str</span>(save_dir / <span class="string">&#x27;labels&#x27;</span> / p.stem) + (<span class="string">&#x27;&#x27;</span> <span class="keyword">if</span> dataset.mode == <span class="string">&#x27;image&#x27;</span> <span class="keyword">else</span> <span class="string">f&#x27;_<span class="subst">&#123;frame&#125;</span>&#x27;</span>)  <span class="comment"># im.txt</span></span><br><span class="line">            <span class="comment"># è®¾ç½®æ‰“å°å›¾ç‰‡çš„ä¿¡æ¯</span></span><br><span class="line">            s += <span class="string">&#x27;%gx%g &#x27;</span> % im.shape[<span class="number">2</span>:]  <span class="comment"># print string</span></span><br><span class="line">            gn = torch.tensor(im0.shape)[[<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>]]  <span class="comment"># normalization gain whwh</span></span><br><span class="line">            <span class="comment"># ä¿å­˜æˆªå›¾</span></span><br><span class="line">            imc = im0.copy() <span class="keyword">if</span> save_crop <span class="keyword">else</span> im0  <span class="comment"># for save_crop</span></span><br><span class="line">            annotator = Annotator(im0, line_width=line_thickness, example=<span class="built_in">str</span>(names))</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(det):</span><br><span class="line">                <span class="comment"># Rescale boxes from img_size to im0 size</span></span><br><span class="line">                <span class="comment"># å°†é¢„æµ‹ä¿¡æ¯æ˜ å°„åˆ°åŸå›¾</span></span><br><span class="line">                det[:, :<span class="number">4</span>] = scale_coords(im.shape[<span class="number">2</span>:], det[:, :<span class="number">4</span>], im0.shape).<span class="built_in">round</span>()</span><br><span class="line"></span><br><span class="line">                <span class="comment"># Print results</span></span><br><span class="line">                <span class="comment"># æ‰“å°æ£€æµ‹åˆ°çš„ç±»åˆ«æ•°é‡</span></span><br><span class="line">                <span class="keyword">for</span> c <span class="keyword">in</span> det[:, -<span class="number">1</span>].unique():</span><br><span class="line">                    n = (det[:, -<span class="number">1</span>] == c).<span class="built_in">sum</span>()  <span class="comment"># detections per class</span></span><br><span class="line">                    s += <span class="string">f&quot;<span class="subst">&#123;n&#125;</span> <span class="subst">&#123;names[<span class="built_in">int</span>(c)]&#125;</span><span class="subst">&#123;<span class="string">&#x27;s&#x27;</span> * (n &gt; <span class="number">1</span>)&#125;</span>, &quot;</span>  <span class="comment"># add to string</span></span><br><span class="line"></span><br><span class="line">                <span class="comment"># Write results</span></span><br><span class="line">                <span class="comment"># ä¿å­˜ç»“æœï¼š txt/å›¾ç‰‡ç”»æ¡†/crop-image</span></span><br><span class="line">                <span class="keyword">for</span> *xyxy, conf, cls <span class="keyword">in</span> <span class="built_in">reversed</span>(det):</span><br><span class="line">                    <span class="comment"># å°†æ¯ä¸ªå›¾ç‰‡çš„é¢„æµ‹ä¿¡æ¯åˆ†åˆ«å­˜å…¥save_dir/labelsä¸‹çš„xxx.txtä¸­ æ¯è¡Œ: class_id + score + xywh</span></span><br><span class="line">                    <span class="keyword">if</span> save_txt:  <span class="comment"># Write to file</span></span><br><span class="line">                        xywh = (xyxy2xywh(torch.tensor(xyxy).view(<span class="number">1</span>, <span class="number">4</span>)) / gn).view(-<span class="number">1</span>).tolist()  <span class="comment"># normalized xywh</span></span><br><span class="line">                        line = (cls, *xywh, conf) <span class="keyword">if</span> save_conf <span class="keyword">else</span> (cls, *xywh)  <span class="comment"># label format</span></span><br><span class="line">                        <span class="keyword">with</span> <span class="built_in">open</span>(txt_path + <span class="string">&#x27;.txt&#x27;</span>, <span class="string">&#x27;a&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">                            f.write((<span class="string">&#x27;%g &#x27;</span> * <span class="built_in">len</span>(line)).rstrip() % line + <span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">                    <span class="comment"># # åœ¨åŸå›¾ä¸Šç”»æ¡† + å°†é¢„æµ‹åˆ°çš„ç›®æ ‡å‰ªåˆ‡å‡ºæ¥ ä¿å­˜æˆå›¾ç‰‡ ä¿å­˜åœ¨save_dir/cropsä¸‹ åœ¨åŸå›¾åƒç”»å›¾æˆ–è€…ä¿å­˜ç»“æœ</span></span><br><span class="line">                    <span class="keyword">if</span> save_img <span class="keyword">or</span> save_crop <span class="keyword">or</span> view_img:  <span class="comment"># Add bbox to image</span></span><br><span class="line">                        c = <span class="built_in">int</span>(cls)  <span class="comment"># integer class</span></span><br><span class="line">                        label = <span class="literal">None</span> <span class="keyword">if</span> hide_labels <span class="keyword">else</span> (names[c] <span class="keyword">if</span> hide_conf <span class="keyword">else</span> <span class="string">f&#x27;<span class="subst">&#123;names[c]&#125;</span> <span class="subst">&#123;conf:<span class="number">.2</span>f&#125;</span>&#x27;</span>)</span><br><span class="line">                        annotator.box_label(xyxy, label, color=colors(c, <span class="literal">True</span>))</span><br><span class="line">                        <span class="keyword">if</span> save_crop:</span><br><span class="line">                            <span class="comment"># åœ¨åŸå›¾ä¸Šç”»æ¡† + å°†é¢„æµ‹åˆ°çš„ç›®æ ‡å‰ªåˆ‡å‡ºæ¥ ä¿å­˜æˆå›¾ç‰‡ ä¿å­˜åœ¨save_dir/cropsä¸‹</span></span><br><span class="line">                            save_one_box(xyxy, imc, file=save_dir / <span class="string">&#x27;crops&#x27;</span> / names[c] / <span class="string">f&#x27;<span class="subst">&#123;p.stem&#125;</span>.jpg&#x27;</span>, BGR=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># Stream results</span></span><br><span class="line">            im0 = annotator.result()</span><br><span class="line">            <span class="comment"># æ˜¾ç¤ºå›¾ç‰‡</span></span><br><span class="line">            <span class="keyword">if</span> view_img:</span><br><span class="line">                cv2.imshow(<span class="built_in">str</span>(p), im0)</span><br><span class="line">                cv2.waitKey(<span class="number">1</span>)  <span class="comment"># 1 millisecond</span></span><br><span class="line"></span><br><span class="line">            <span class="comment"># Save results (image with detections)</span></span><br><span class="line">            <span class="comment"># ä¿å­˜å›¾ç‰‡</span></span><br><span class="line">            <span class="keyword">if</span> save_img:</span><br><span class="line">                <span class="keyword">if</span> dataset.mode == <span class="string">&#x27;image&#x27;</span>:</span><br><span class="line">                    cv2.imwrite(save_path, im0)</span><br><span class="line">                <span class="keyword">else</span>:  <span class="comment"># &#x27;video&#x27; or &#x27;stream&#x27;</span></span><br><span class="line">                    <span class="keyword">if</span> vid_path[i] != save_path:  <span class="comment"># new video</span></span><br><span class="line">                        vid_path[i] = save_path</span><br><span class="line">                        <span class="keyword">if</span> <span class="built_in">isinstance</span>(vid_writer[i], cv2.VideoWriter):</span><br><span class="line">                            vid_writer[i].release()  <span class="comment"># release previous video writer</span></span><br><span class="line">                        <span class="keyword">if</span> vid_cap:  <span class="comment"># video</span></span><br><span class="line">                            fps = vid_cap.get(cv2.CAP_PROP_FPS)</span><br><span class="line">                            w = <span class="built_in">int</span>(vid_cap.get(cv2.CAP_PROP_FRAME_WIDTH))</span><br><span class="line">                            h = <span class="built_in">int</span>(vid_cap.get(cv2.CAP_PROP_FRAME_HEIGHT))</span><br><span class="line">                        <span class="keyword">else</span>:  <span class="comment"># stream</span></span><br><span class="line">                            fps, w, h = <span class="number">30</span>, im0.shape[<span class="number">1</span>], im0.shape[<span class="number">0</span>]</span><br><span class="line">                        save_path = <span class="built_in">str</span>(Path(save_path).with_suffix(<span class="string">&#x27;.mp4&#x27;</span>))  <span class="comment"># force *.mp4 suffix on results videos</span></span><br><span class="line">                        vid_writer[i] = cv2.VideoWriter(save_path, cv2.VideoWriter_fourcc(*<span class="string">&#x27;mp4v&#x27;</span>), fps, (w, h))</span><br><span class="line">                    vid_writer[i].write(im0)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Print time (inference-only)</span></span><br><span class="line">        LOGGER.info(<span class="string">f&#x27;<span class="subst">&#123;s&#125;</span>Done. (<span class="subst">&#123;t3 - t2:<span class="number">.3</span>f&#125;</span>s)&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Print results</span></span><br><span class="line">    <span class="comment"># æ‰“å°æ¯å¼ å›¾ç‰‡çš„é€Ÿåº¦</span></span><br><span class="line">    t = <span class="built_in">tuple</span>(x / seen * <span class="number">1E3</span> <span class="keyword">for</span> x <span class="keyword">in</span> dt)  <span class="comment"># speeds per image</span></span><br><span class="line">    LOGGER.info(<span class="string">f&#x27;Speed: %.1fms pre-process, %.1fms inference, %.1fms NMS per image at shape <span class="subst">&#123;(<span class="number">1</span>, <span class="number">3</span>, *imgsz)&#125;</span>&#x27;</span> % t)</span><br><span class="line">    <span class="comment"># ä¿å­˜å›¾ç‰‡æˆ–è€…txt</span></span><br><span class="line">    <span class="keyword">if</span> save_txt <span class="keyword">or</span> save_img:</span><br><span class="line">        s = <span class="string">f&quot;\n<span class="subst">&#123;<span class="built_in">len</span>(<span class="built_in">list</span>(save_dir.glob(<span class="string">&#x27;labels/*.txt&#x27;</span>)))&#125;</span> labels saved to <span class="subst">&#123;save_dir / <span class="string">&#x27;labels&#x27;</span>&#125;</span>&quot;</span> <span class="keyword">if</span> save_txt <span class="keyword">else</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">        LOGGER.info(<span class="string">f&quot;Results saved to <span class="subst">&#123;colorstr(<span class="string">&#x27;bold&#x27;</span>, save_dir)&#125;</span><span class="subst">&#123;s&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> update:</span><br><span class="line">        strip_optimizer(weights)  <span class="comment"># update model (to fix SourceChangeWarning)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">parse_opt</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    weights: è®­ç»ƒçš„æƒé‡è·¯å¾„,å¯ä»¥ä½¿ç”¨è‡ªå·±è®­ç»ƒçš„æƒé‡,ä¹Ÿå¯ä»¥ä½¿ç”¨å®˜ç½‘æä¾›çš„æƒé‡</span></span><br><span class="line"><span class="string">    é»˜è®¤å®˜ç½‘çš„æƒé‡yolov5s.pt(yolov5n.pt/yolov5s.pt/yolov5m.pt/yolov5l.pt/yolov5x.pt/åŒºåˆ«åœ¨äºç½‘ç»œçš„å®½åº¦å’Œæ·±åº¦ä»¥æ­¤å¢åŠ )</span></span><br><span class="line"><span class="string">    source: æµ‹è¯•æ•°æ®ï¼Œå¯ä»¥æ˜¯å›¾ç‰‡/è§†é¢‘è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯&#x27;0&#x27;(ç”µè„‘è‡ªå¸¦æ‘„åƒå¤´),ä¹Ÿå¯ä»¥æ˜¯rtspç­‰è§†é¢‘æµ, é»˜è®¤data/images</span></span><br><span class="line"><span class="string">    data: é…ç½®æ•°æ®æ–‡ä»¶è·¯å¾„, åŒ…æ‹¬image/label/classesç­‰ä¿¡æ¯, è®­ç»ƒè‡ªå·±çš„æ–‡ä»¶, éœ€è¦ä½œç›¸åº”æ›´æ”¹, å¯ä»¥ä¸ç”¨ç®¡</span></span><br><span class="line"><span class="string">    å¦‚æœè®¾ç½®äº†åªæ˜¾ç¤ºä¸ªåˆ«ç±»åˆ«å³ä½¿ç”¨äº†--classes = 0 æˆ–äºŒè€…1, 2, 3ç­‰, åˆ™éœ€è¦è®¾ç½®è¯¥æ–‡ä»¶ï¼Œæ•°å­—å’Œç±»åˆ«ç›¸å¯¹åº”æ‰èƒ½åªæ£€æµ‹æŸä¸€ä¸ªç±»</span></span><br><span class="line"><span class="string">    imgsz: ç½‘ç»œè¾“å…¥å›¾ç‰‡å¤§å°, é»˜è®¤çš„å¤§å°æ˜¯640</span></span><br><span class="line"><span class="string">    conf-thres: ç½®ä¿¡åº¦é˜ˆå€¼ï¼Œ é»˜è®¤ä¸º0.25</span></span><br><span class="line"><span class="string">    iou-thres:  åšnmsçš„ioué˜ˆå€¼, é»˜è®¤ä¸º0.45</span></span><br><span class="line"><span class="string">    max-det: ä¿ç•™çš„æœ€å¤§æ£€æµ‹æ¡†æ•°é‡, æ¯å¼ å›¾ç‰‡ä¸­æ£€æµ‹ç›®æ ‡çš„ä¸ªæ•°æœ€å¤šä¸º1000ç±»</span></span><br><span class="line"><span class="string">    device: è®¾ç½®è®¾å¤‡CPU/CUDA, å¯ä»¥ä¸ç”¨è®¾ç½®</span></span><br><span class="line"><span class="string">    view-img: æ˜¯å¦å±•ç¤ºé¢„æµ‹ä¹‹åçš„å›¾ç‰‡/è§†é¢‘, é»˜è®¤False, --view-img ç”µè„‘ç•Œé¢å‡ºç°å›¾ç‰‡æˆ–è€…è§†é¢‘æ£€æµ‹ç»“æœ</span></span><br><span class="line"><span class="string">    save-txt: æ˜¯å¦å°†é¢„æµ‹çš„æ¡†åæ ‡ä»¥txtæ–‡ä»¶å½¢å¼ä¿å­˜, é»˜è®¤False, ä½¿ç”¨--save-txt åœ¨è·¯å¾„runs/detect/exp*/labels/*.txtä¸‹ç”Ÿæˆæ¯å¼ å›¾ç‰‡é¢„æµ‹çš„txtæ–‡ä»¶</span></span><br><span class="line"><span class="string">    save-conf: æ˜¯å¦å°†ç½®ä¿¡åº¦confä¹Ÿä¿å­˜åˆ°txtä¸­, é»˜è®¤False</span></span><br><span class="line"><span class="string">    save-crop: æ˜¯å¦ä¿å­˜è£å‰ªé¢„æµ‹æ¡†å›¾ç‰‡, é»˜è®¤ä¸ºFalse, ä½¿ç”¨--save-crop åœ¨runs/detect/exp*/crop/å‰ªåˆ‡ç±»åˆ«æ–‡ä»¶å¤¹/ è·¯å¾„ä¸‹ä¼šä¿å­˜æ¯ä¸ªæ¥ä¸‹æ¥çš„ç›®æ ‡</span></span><br><span class="line"><span class="string">    nosave: ä¸ä¿å­˜å›¾ç‰‡ã€è§†é¢‘, è¦ä¿å­˜å›¾ç‰‡ï¼Œä¸è®¾ç½®--nosave åœ¨runs/detect/exp*/ä¼šå‡ºç°é¢„æµ‹çš„ç»“æœ</span></span><br><span class="line"><span class="string">    classes: è®¾ç½®åªä¿ç•™æŸä¸€éƒ¨åˆ†ç±»åˆ«, å½¢å¦‚0æˆ–è€…0 2 3, ä½¿ç”¨--classes = n, åˆ™åœ¨è·¯å¾„runs/detect/exp*/ä¸‹ä¿å­˜çš„å›¾ç‰‡ä¸ºnæ‰€å¯¹åº”çš„ç±»åˆ«, æ­¤æ—¶éœ€è¦è®¾ç½®data</span></span><br><span class="line"><span class="string">    agnostic-nms: è¿›è¡ŒNMSå»é™¤ä¸åŒç±»åˆ«ä¹‹é—´çš„æ¡†, é»˜è®¤False</span></span><br><span class="line"><span class="string">    augment: TTAæµ‹è¯•æ—¶å¢å¼º/å¤šå°ºåº¦é¢„æµ‹, å¯ä»¥æåˆ†</span></span><br><span class="line"><span class="string">    visualize: æ˜¯å¦å¯è§†åŒ–ç½‘ç»œå±‚è¾“å‡ºç‰¹å¾</span></span><br><span class="line"><span class="string">    update: å¦‚æœä¸ºTrue,åˆ™å¯¹æ‰€æœ‰æ¨¡å‹è¿›è¡Œstrip_optimizeræ“ä½œ,å»é™¤ptæ–‡ä»¶ä¸­çš„ä¼˜åŒ–å™¨ç­‰ä¿¡æ¯,é»˜è®¤ä¸ºFalse</span></span><br><span class="line"><span class="string">    project: ä¿å­˜æµ‹è¯•æ—¥å¿—çš„æ–‡ä»¶å¤¹è·¯å¾„</span></span><br><span class="line"><span class="string">    name: ä¿å­˜æµ‹è¯•æ—¥å¿—æ–‡ä»¶å¤¹çš„åå­—, æ‰€ä»¥æœ€ç»ˆæ˜¯ä¿å­˜åœ¨project/nameä¸­</span></span><br><span class="line"><span class="string">    exist_ok: æ˜¯å¦é‡æ–°åˆ›å»ºæ—¥å¿—æ–‡ä»¶, Falseæ—¶é‡æ–°åˆ›å»ºæ–‡ä»¶</span></span><br><span class="line"><span class="string">    line-thickness: ç”»æ¡†çš„çº¿æ¡ç²—ç»†</span></span><br><span class="line"><span class="string">    hide-labels: å¯è§†åŒ–æ—¶éšè—é¢„æµ‹ç±»åˆ«</span></span><br><span class="line"><span class="string">    hide-conf: å¯è§†åŒ–æ—¶éšè—ç½®ä¿¡åº¦</span></span><br><span class="line"><span class="string">    half: æ˜¯å¦ä½¿ç”¨F16ç²¾åº¦æ¨ç†, åŠè¿›åº¦æé«˜æ£€æµ‹é€Ÿåº¦</span></span><br><span class="line"><span class="string">    dnn: ç”¨OpenCV DNNé¢„æµ‹</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    parser = argparse.ArgumentParser()</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--weights&#x27;</span>, nargs=<span class="string">&#x27;+&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, default=ROOT / <span class="string">&#x27;yolov5s.pt&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;model path(s)&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--source&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, default=ROOT / <span class="string">&#x27;data/images&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;file/dir/URL/glob, 0 for webcam&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--data&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, default=ROOT / <span class="string">&#x27;data/coco128.yaml&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;(optional) dataset.yaml path&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--imgsz&#x27;</span>, <span class="string">&#x27;--img&#x27;</span>, <span class="string">&#x27;--img-size&#x27;</span>, nargs=<span class="string">&#x27;+&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">int</span>, default=[<span class="number">640</span>], <span class="built_in">help</span>=<span class="string">&#x27;inference size h,w&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--conf-thres&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">float</span>, default=<span class="number">0.25</span>, <span class="built_in">help</span>=<span class="string">&#x27;confidence threshold&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--iou-thres&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">float</span>, default=<span class="number">0.45</span>, <span class="built_in">help</span>=<span class="string">&#x27;NMS IoU threshold&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--max-det&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">int</span>, default=<span class="number">1000</span>, <span class="built_in">help</span>=<span class="string">&#x27;maximum detections per image&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--device&#x27;</span>, default=<span class="string">&#x27;&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;cuda device, i.e. 0 or 0,1,2,3 or cpu&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--view-img&#x27;</span>, action=<span class="string">&#x27;store_true&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;show results&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--save-txt&#x27;</span>, action=<span class="string">&#x27;store_true&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;save results to *.txt&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--save-conf&#x27;</span>, action=<span class="string">&#x27;store_true&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;save confidences in --save-txt labels&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--save-crop&#x27;</span>, action=<span class="string">&#x27;store_true&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;save cropped prediction boxes&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--nosave&#x27;</span>, action=<span class="string">&#x27;store_true&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;do not save images/videos&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--classes&#x27;</span>, nargs=<span class="string">&#x27;+&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">int</span>, <span class="built_in">help</span>=<span class="string">&#x27;filter by class: --classes 0, or --classes 0 2 3&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--agnostic-nms&#x27;</span>, action=<span class="string">&#x27;store_true&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;class-agnostic NMS&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--augment&#x27;</span>, action=<span class="string">&#x27;store_true&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;augmented inference&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--visualize&#x27;</span>, action=<span class="string">&#x27;store_true&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;visualize features&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--update&#x27;</span>, action=<span class="string">&#x27;store_true&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;update all models&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--project&#x27;</span>, default=ROOT / <span class="string">&#x27;runs/detect&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;save results to project/name&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--name&#x27;</span>, default=<span class="string">&#x27;exp&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;save results to project/name&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--exist-ok&#x27;</span>, action=<span class="string">&#x27;store_true&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;existing project/name ok, do not increment&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--line-thickness&#x27;</span>, default=<span class="number">3</span>, <span class="built_in">type</span>=<span class="built_in">int</span>, <span class="built_in">help</span>=<span class="string">&#x27;bounding box thickness (pixels)&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--hide-labels&#x27;</span>, default=<span class="literal">False</span>, action=<span class="string">&#x27;store_true&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;hide labels&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--hide-conf&#x27;</span>, default=<span class="literal">False</span>, action=<span class="string">&#x27;store_true&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;hide confidences&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--half&#x27;</span>, action=<span class="string">&#x27;store_true&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;use FP16 half-precision inference&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--dnn&#x27;</span>, action=<span class="string">&#x27;store_true&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;use OpenCV DNN for ONNX inference&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    opt = parser.parse_args()</span><br><span class="line">    <span class="comment"># æ‰©å……ç»´åº¦, å¦‚æœæ˜¯ä¸€ä½å°±æ‰©å……ä¸€ä½</span></span><br><span class="line">    opt.imgsz *= <span class="number">2</span> <span class="keyword">if</span> <span class="built_in">len</span>(opt.imgsz) == <span class="number">1</span> <span class="keyword">else</span> <span class="number">1</span>  <span class="comment"># expand</span></span><br><span class="line">    <span class="comment"># è¾“å‡ºæ‰€æœ‰å‚æ•°</span></span><br><span class="line">    print_args(FILE.stem, opt)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> opt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>(<span class="params">opt</span>):</span><br><span class="line">    <span class="comment"># æ£€æŸ¥ç¯å¢ƒ/æ‰“å°å‚æ•°,ä¸»è¦æ˜¯requrement.txtçš„åŒ…æ˜¯å¦å®‰è£…ï¼Œç”¨å½©è‰²æ˜¾ç¤ºè®¾ç½®çš„å‚æ•°</span></span><br><span class="line">    check_requirements(exclude=(<span class="string">&#x27;tensorboard&#x27;</span>, <span class="string">&#x27;thop&#x27;</span>))</span><br><span class="line">    <span class="comment"># æ‰§è¡Œrun()å‡½æ•°</span></span><br><span class="line">    run(**<span class="built_in">vars</span>(opt))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    opt = parse_opt()</span><br><span class="line">    main(opt)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>parse_optï¼ˆï¼‰</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">parse_opt</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    weights: è®­ç»ƒçš„æƒé‡è·¯å¾„,å¯ä»¥ä½¿ç”¨è‡ªå·±è®­ç»ƒçš„æƒé‡,ä¹Ÿå¯ä»¥ä½¿ç”¨å®˜ç½‘æä¾›çš„æƒé‡</span></span><br><span class="line"><span class="string">    é»˜è®¤å®˜ç½‘çš„æƒé‡yolov5s.pt(yolov5n.pt/yolov5s.pt/yolov5m.pt/yolov5l.pt/yolov5x.pt/åŒºåˆ«åœ¨äºç½‘ç»œçš„å®½åº¦å’Œæ·±åº¦ä»¥æ­¤å¢åŠ )</span></span><br><span class="line"><span class="string">    source: æµ‹è¯•æ•°æ®ï¼Œå¯ä»¥æ˜¯å›¾ç‰‡/è§†é¢‘è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯&#x27;0&#x27;(ç”µè„‘è‡ªå¸¦æ‘„åƒå¤´),ä¹Ÿå¯ä»¥æ˜¯rtspç­‰è§†é¢‘æµ, é»˜è®¤data/images</span></span><br><span class="line"><span class="string">    data: é…ç½®æ•°æ®æ–‡ä»¶è·¯å¾„, åŒ…æ‹¬image/label/classesç­‰ä¿¡æ¯, è®­ç»ƒè‡ªå·±çš„æ–‡ä»¶, éœ€è¦ä½œç›¸åº”æ›´æ”¹, å¯ä»¥ä¸ç”¨ç®¡</span></span><br><span class="line"><span class="string">    å¦‚æœè®¾ç½®äº†åªæ˜¾ç¤ºä¸ªåˆ«ç±»åˆ«å³ä½¿ç”¨äº†--classes = 0 æˆ–äºŒè€…1, 2, 3ç­‰, åˆ™éœ€è¦è®¾ç½®è¯¥æ–‡ä»¶ï¼Œæ•°å­—å’Œç±»åˆ«ç›¸å¯¹åº”æ‰èƒ½åªæ£€æµ‹æŸä¸€ä¸ªç±»</span></span><br><span class="line"><span class="string">    imgsz: ç½‘ç»œè¾“å…¥å›¾ç‰‡å¤§å°, é»˜è®¤çš„å¤§å°æ˜¯640</span></span><br><span class="line"><span class="string">    conf-thres: ç½®ä¿¡åº¦é˜ˆå€¼ï¼Œ é»˜è®¤ä¸º0.25</span></span><br><span class="line"><span class="string">    iou-thres:  åšnmsçš„ioué˜ˆå€¼, é»˜è®¤ä¸º0.45</span></span><br><span class="line"><span class="string">    max-det: ä¿ç•™çš„æœ€å¤§æ£€æµ‹æ¡†æ•°é‡, æ¯å¼ å›¾ç‰‡ä¸­æ£€æµ‹ç›®æ ‡çš„ä¸ªæ•°æœ€å¤šä¸º1000ç±»</span></span><br><span class="line"><span class="string">    device: è®¾ç½®è®¾å¤‡CPU/CUDA, å¯ä»¥ä¸ç”¨è®¾ç½®</span></span><br><span class="line"><span class="string">    view-img: æ˜¯å¦å±•ç¤ºé¢„æµ‹ä¹‹åçš„å›¾ç‰‡/è§†é¢‘, é»˜è®¤False, --view-img ç”µè„‘ç•Œé¢å‡ºç°å›¾ç‰‡æˆ–è€…è§†é¢‘æ£€æµ‹ç»“æœ</span></span><br><span class="line"><span class="string">    save-txt: æ˜¯å¦å°†é¢„æµ‹çš„æ¡†åæ ‡ä»¥txtæ–‡ä»¶å½¢å¼ä¿å­˜, é»˜è®¤False, ä½¿ç”¨--save-txt åœ¨è·¯å¾„runs/detect/exp*/labels/*.txtä¸‹ç”Ÿæˆæ¯å¼ å›¾ç‰‡é¢„æµ‹çš„txtæ–‡ä»¶</span></span><br><span class="line"><span class="string">    save-conf: æ˜¯å¦å°†ç½®ä¿¡åº¦confä¹Ÿä¿å­˜åˆ°txtä¸­, é»˜è®¤False</span></span><br><span class="line"><span class="string">    save-crop: æ˜¯å¦ä¿å­˜è£å‰ªé¢„æµ‹æ¡†å›¾ç‰‡, é»˜è®¤ä¸ºFalse, ä½¿ç”¨--save-crop åœ¨runs/detect/exp*/crop/å‰ªåˆ‡ç±»åˆ«æ–‡ä»¶å¤¹/ è·¯å¾„ä¸‹ä¼šä¿å­˜æ¯ä¸ªæ¥ä¸‹æ¥çš„ç›®æ ‡</span></span><br><span class="line"><span class="string">    nosave: ä¸ä¿å­˜å›¾ç‰‡ã€è§†é¢‘, è¦ä¿å­˜å›¾ç‰‡ï¼Œä¸è®¾ç½®--nosave åœ¨runs/detect/exp*/ä¼šå‡ºç°é¢„æµ‹çš„ç»“æœ</span></span><br><span class="line"><span class="string">    classes: è®¾ç½®åªä¿ç•™æŸä¸€éƒ¨åˆ†ç±»åˆ«, å½¢å¦‚0æˆ–è€…0 2 3, ä½¿ç”¨--classes = n, åˆ™åœ¨è·¯å¾„runs/detect/exp*/ä¸‹ä¿å­˜çš„å›¾ç‰‡ä¸ºnæ‰€å¯¹åº”çš„ç±»åˆ«, æ­¤æ—¶éœ€è¦è®¾ç½®data</span></span><br><span class="line"><span class="string">    agnostic-nms: è¿›è¡ŒNMSå»é™¤ä¸åŒç±»åˆ«ä¹‹é—´çš„æ¡†, é»˜è®¤False</span></span><br><span class="line"><span class="string">    augment: TTAæµ‹è¯•æ—¶å¢å¼º/å¤šå°ºåº¦é¢„æµ‹</span></span><br><span class="line"><span class="string">    visualize: æ˜¯å¦å¯è§†åŒ–ç½‘ç»œå±‚è¾“å‡ºç‰¹å¾</span></span><br><span class="line"><span class="string">    update: å¦‚æœä¸ºTrue,åˆ™å¯¹æ‰€æœ‰æ¨¡å‹è¿›è¡Œstrip_optimizeræ“ä½œ,å»é™¤ptæ–‡ä»¶ä¸­çš„ä¼˜åŒ–å™¨ç­‰ä¿¡æ¯,é»˜è®¤ä¸ºFalse</span></span><br><span class="line"><span class="string">    project:ä¿å­˜æµ‹è¯•æ—¥å¿—çš„æ–‡ä»¶å¤¹è·¯å¾„</span></span><br><span class="line"><span class="string">    name:ä¿å­˜æµ‹è¯•æ—¥å¿—æ–‡ä»¶å¤¹çš„åå­—, æ‰€ä»¥æœ€ç»ˆæ˜¯ä¿å­˜åœ¨project/nameä¸­</span></span><br><span class="line"><span class="string">    exist_ok: æ˜¯å¦é‡æ–°åˆ›å»ºæ—¥å¿—æ–‡ä»¶, Falseæ—¶é‡æ–°åˆ›å»ºæ–‡ä»¶</span></span><br><span class="line"><span class="string">    line-thickness: ç”»æ¡†çš„çº¿æ¡ç²—ç»†</span></span><br><span class="line"><span class="string">    hide-labels: å¯è§†åŒ–æ—¶éšè—é¢„æµ‹ç±»åˆ«</span></span><br><span class="line"><span class="string">    hide-conf: å¯è§†åŒ–æ—¶éšè—ç½®ä¿¡åº¦</span></span><br><span class="line"><span class="string">    half: æ˜¯å¦ä½¿ç”¨F16ç²¾åº¦æ¨ç†, åŠè¿›åº¦æé«˜æ£€æµ‹é€Ÿåº¦</span></span><br><span class="line"><span class="string">    dnn: ç”¨OpenCV DNNé¢„æµ‹</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    parser = argparse.ArgumentParser()</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--weights&#x27;</span>, nargs=<span class="string">&#x27;+&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, default=ROOT / <span class="string">&#x27;yolov5s.pt&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;model path(s)&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--source&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, default=ROOT / <span class="string">&#x27;data/images&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;file/dir/URL/glob, 0 for webcam&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--data&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, default=ROOT / <span class="string">&#x27;data/coco128.yaml&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;(optional) dataset.yaml path&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--imgsz&#x27;</span>, <span class="string">&#x27;--img&#x27;</span>, <span class="string">&#x27;--img-size&#x27;</span>, nargs=<span class="string">&#x27;+&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">int</span>, default=[<span class="number">640</span>], <span class="built_in">help</span>=<span class="string">&#x27;inference size h,w&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--conf-thres&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">float</span>, default=<span class="number">0.25</span>, <span class="built_in">help</span>=<span class="string">&#x27;confidence threshold&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--iou-thres&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">float</span>, default=<span class="number">0.45</span>, <span class="built_in">help</span>=<span class="string">&#x27;NMS IoU threshold&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--max-det&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">int</span>, default=<span class="number">1000</span>, <span class="built_in">help</span>=<span class="string">&#x27;maximum detections per image&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--device&#x27;</span>, default=<span class="string">&#x27;&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;cuda device, i.e. 0 or 0,1,2,3 or cpu&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--view-img&#x27;</span>, action=<span class="string">&#x27;store_true&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;show results&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--save-txt&#x27;</span>, action=<span class="string">&#x27;store_true&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;save results to *.txt&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--save-conf&#x27;</span>, action=<span class="string">&#x27;store_true&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;save confidences in --save-txt labels&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--save-crop&#x27;</span>, action=<span class="string">&#x27;store_true&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;save cropped prediction boxes&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--nosave&#x27;</span>, action=<span class="string">&#x27;store_true&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;do not save images/videos&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--classes&#x27;</span>, nargs=<span class="string">&#x27;+&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">int</span>, <span class="built_in">help</span>=<span class="string">&#x27;filter by class: --classes 0, or --classes 0 2 3&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--agnostic-nms&#x27;</span>, action=<span class="string">&#x27;store_true&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;class-agnostic NMS&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--augment&#x27;</span>, action=<span class="string">&#x27;store_true&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;augmented inference&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--visualize&#x27;</span>, action=<span class="string">&#x27;store_true&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;visualize features&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--update&#x27;</span>, action=<span class="string">&#x27;store_true&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;update all models&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--project&#x27;</span>, default=ROOT / <span class="string">&#x27;runs/detect&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;save results to project/name&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--name&#x27;</span>, default=<span class="string">&#x27;exp&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;save results to project/name&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--exist-ok&#x27;</span>, action=<span class="string">&#x27;store_true&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;existing project/name ok, do not increment&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--line-thickness&#x27;</span>, default=<span class="number">3</span>, <span class="built_in">type</span>=<span class="built_in">int</span>, <span class="built_in">help</span>=<span class="string">&#x27;bounding box thickness (pixels)&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--hide-labels&#x27;</span>, default=<span class="literal">False</span>, action=<span class="string">&#x27;store_true&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;hide labels&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--hide-conf&#x27;</span>, default=<span class="literal">False</span>, action=<span class="string">&#x27;store_true&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;hide confidences&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--half&#x27;</span>, action=<span class="string">&#x27;store_true&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;use FP16 half-precision inference&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--dnn&#x27;</span>, action=<span class="string">&#x27;store_true&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;use OpenCV DNN for ONNX inference&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    opt = parser.parse_args()</span><br><span class="line">    <span class="comment"># æ‰©å……ç»´åº¦, å¦‚æœæ˜¯ä¸€ä½å°±æ‰©å……ä¸€ä½</span></span><br><span class="line">    opt.imgsz *= <span class="number">2</span> <span class="keyword">if</span> <span class="built_in">len</span>(opt.imgsz) == <span class="number">1</span> <span class="keyword">else</span> <span class="number">1</span>  <span class="comment"># expand</span></span><br><span class="line">    <span class="comment"># è¾“å‡ºæ‰€æœ‰å‚æ•°</span></span><br><span class="line">    print_args(FILE.stem, opt)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> opt</span><br></pre></td></tr></table></figure></li><li><p>main()</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>(<span class="params">opt</span>):</span><br><span class="line">    <span class="comment"># æ£€æŸ¥ç¯å¢ƒ/æ‰“å°å‚æ•°,ä¸»è¦æ˜¯requrement.txtçš„åŒ…æ˜¯å¦å®‰è£…ï¼Œç”¨å½©è‰²æ˜¾ç¤ºè®¾ç½®çš„å‚æ•°</span></span><br><span class="line">    check_requirements(exclude=(<span class="string">&#x27;tensorboard&#x27;</span>, <span class="string">&#x27;thop&#x27;</span>))</span><br><span class="line">    <span class="comment"># æ‰§è¡Œrun()å‡½æ•°</span></span><br><span class="line">    run(**<span class="built_in">vars</span>(opt))</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>run()</p><ul><li><p>ä¼ å…¥å‚æ•°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">weights=ROOT / <span class="string">&#x27;yolov5s.pt&#x27;</span>,  <span class="comment"># model.pt path(s) # æƒé‡æ–‡ä»¶åœ°å€ é»˜è®¤ weights/å¯ä»¥æ˜¯è‡ªå·±çš„è·¯å¾„</span></span></span><br><span class="line"><span class="params">        source=ROOT / <span class="string">&#x27;data/images&#x27;</span>,  <span class="comment"># file/dir/URL/glob, 0 for webcam 0 è‡ªå¸¦ç”µè„‘æ‘„åƒå¤´ï¼Œ é»˜è®¤data/images/</span></span></span><br><span class="line"><span class="params">        data=ROOT / <span class="string">&#x27;data/coco128.yaml&#x27;</span>,  <span class="comment"># dataset.yaml path, dataæ–‡ä»¶è·¯å¾„ï¼ŒåŒ…æ‹¬ç±»åˆ«/å›¾ç‰‡/æ ‡ç­¾ç­‰ä¿¡æ¯</span></span></span><br><span class="line"><span class="params">        imgsz=(<span class="params"><span class="number">640</span>, <span class="number">640</span></span>),  <span class="comment"># inference size (height, width) è¾“å…¥å›¾ç‰‡çš„å¤§å° é»˜è®¤640*640</span></span></span><br><span class="line"><span class="params">        conf_thres=<span class="number">0.25</span>,  <span class="comment"># confidence threshold # objectç½®ä¿¡åº¦é˜ˆå€¼ é»˜è®¤0.25  ç”¨åœ¨nmsä¸­</span></span></span><br><span class="line"><span class="params">        iou_thres=<span class="number">0.45</span>,  <span class="comment"># NMS IOU threshold # åšnmsçš„ioué˜ˆå€¼ é»˜è®¤0.45   ç”¨åœ¨nmsä¸­</span></span></span><br><span class="line"><span class="params">        max_det=<span class="number">1000</span>,  <span class="comment"># maximum detections per image æ¯å¼ å›¾ç‰‡æœ€å¤šçš„ç›®æ ‡æ•°é‡  ç”¨åœ¨nmsä¸­ </span></span></span><br><span class="line"><span class="params">        device=<span class="string">&#x27;&#x27;</span>,  <span class="comment"># cuda device, i.e. 0 or 0,1,2,3 or cpu è®¾ç½®ä»£ç æ‰§è¡Œçš„è®¾å¤‡ cuda device, i.e. 0 or 0,1,2,3 or cpu</span></span></span><br><span class="line"><span class="params">        view_img=<span class="literal">False</span>,  <span class="comment"># show results æ˜¯å¦å±•ç¤ºé¢„æµ‹ä¹‹åçš„å›¾ç‰‡æˆ–è§†é¢‘ é»˜è®¤False </span></span></span><br><span class="line"><span class="params">        save_txt=<span class="literal">False</span>,  <span class="comment"># save results to *.txt æ˜¯å¦å°†é¢„æµ‹çš„æ¡†åæ ‡ä»¥txtæ–‡ä»¶å½¢å¼ä¿å­˜, é»˜è®¤False, ä½¿ç”¨--save-txt åœ¨è·¯å¾„runs/detect/exp*/labels/*.txtä¸‹ç”Ÿæˆæ¯å¼ å›¾ç‰‡é¢„æµ‹çš„txtæ–‡ä»¶</span></span></span><br><span class="line"><span class="params">        save_conf=<span class="literal">False</span>,  <span class="comment"># save confidences in --save-txt labels æ˜¯å¦å°†ç½®ä¿¡åº¦confä¹Ÿä¿å­˜åˆ°txtä¸­, é»˜è®¤False</span></span></span><br><span class="line"><span class="params">        save_crop=<span class="literal">False</span>,  <span class="comment"># save cropped prediction boxes æ˜¯å¦ä¿å­˜è£å‰ªé¢„æµ‹æ¡†å›¾ç‰‡, é»˜è®¤ä¸ºFalse, ä½¿ç”¨--save-crop åœ¨runs/detect/exp*/crop/å‰ªåˆ‡ç±»åˆ«æ–‡ä»¶å¤¹/ è·¯å¾„ä¸‹ä¼šä¿å­˜æ¯ä¸ªæ¥ä¸‹æ¥çš„ç›®æ ‡</span></span></span><br><span class="line"><span class="params">        nosave=<span class="literal">False</span>,  <span class="comment"># do not save images/videos ä¸ä¿å­˜å›¾ç‰‡ã€è§†é¢‘, è¦ä¿å­˜å›¾ç‰‡ï¼Œä¸è®¾ç½®--nosave åœ¨runs/detect/exp*/ä¼šå‡ºç°é¢„æµ‹çš„ç»“æœ</span></span></span><br><span class="line"><span class="params">        classes=<span class="literal">None</span>,  <span class="comment"># filter by class: --class 0, or --class 0 2 3 è®¾ç½®åªä¿ç•™æŸä¸€éƒ¨åˆ†ç±»åˆ«, å½¢å¦‚0æˆ–è€…0 2 3, ä½¿ç”¨--classes = n, åˆ™åœ¨è·¯å¾„runs/detect/exp*/ä¸‹ä¿å­˜çš„å›¾ç‰‡ä¸ºnæ‰€å¯¹åº”çš„ç±»åˆ«, æ­¤æ—¶éœ€è¦è®¾ç½®data</span></span></span><br><span class="line"><span class="params">        agnostic_nms=<span class="literal">False</span>,  <span class="comment"># class-agnostic NMS è¿›è¡ŒNMSå»é™¤ä¸åŒç±»åˆ«ä¹‹é—´çš„æ¡†, é»˜è®¤False</span></span></span><br><span class="line"><span class="params">        augment=<span class="literal">False</span>,  <span class="comment"># augmented inference TTAæµ‹è¯•æ—¶å¢å¼º/å¤šå°ºåº¦é¢„æµ‹ï¼Œå¯ä»¥æåˆ†</span></span></span><br><span class="line"><span class="params">        visualize=<span class="literal">False</span>,  <span class="comment"># visualize features æ˜¯å¦å¯è§†åŒ–ç½‘ç»œå±‚è¾“å‡ºç‰¹å¾</span></span></span><br><span class="line"><span class="params">        update=<span class="literal">False</span>,  <span class="comment"># update all models å¦‚æœä¸ºTrue,åˆ™å¯¹æ‰€æœ‰æ¨¡å‹è¿›è¡Œstrip_optimizeræ“ä½œ,å»é™¤ptæ–‡ä»¶ä¸­çš„ä¼˜åŒ–å™¨ç­‰ä¿¡æ¯,é»˜è®¤ä¸ºFalse</span></span></span><br><span class="line"><span class="params">        project=ROOT / <span class="string">&#x27;runs/detect&#x27;</span>,  <span class="comment"># save results to project/name ä¿å­˜æµ‹è¯•æ—¥å¿—çš„æ–‡ä»¶å¤¹è·¯å¾„</span></span></span><br><span class="line"><span class="params">        name=<span class="string">&#x27;exp&#x27;</span>,  <span class="comment"># save results to project/name æ¯æ¬¡å®éªŒçš„åç§°</span></span></span><br><span class="line"><span class="params">        exist_ok=<span class="literal">False</span>,  <span class="comment"># existing project/name ok, do not increment æ˜¯å¦é‡æ–°åˆ›å»ºæ—¥å¿—æ–‡ä»¶, Falseæ—¶é‡æ–°åˆ›å»ºæ–‡ä»¶</span></span></span><br><span class="line"><span class="params">        line_thickness=<span class="number">3</span>,  <span class="comment"># bounding box thickness (pixels) ç”»æ¡†çš„çº¿æ¡ç²—ç»†</span></span></span><br><span class="line"><span class="params">        hide_labels=<span class="literal">False</span>,  <span class="comment"># hide labels å¯è§†åŒ–æ—¶éšè—é¢„æµ‹ç±»åˆ«</span></span></span><br><span class="line"><span class="params">        hide_conf=<span class="literal">False</span>,  <span class="comment"># hide confidences å¯è§†åŒ–æ—¶éšè—ç½®ä¿¡åº¦</span></span></span><br><span class="line"><span class="params">        half=<span class="literal">False</span>,  <span class="comment"># use FP16 half-precision inference æ˜¯å¦ä½¿ç”¨F16ç²¾åº¦æ¨ç†, åŠè¿›åº¦æé«˜æ£€æµ‹é€Ÿåº¦</span></span></span><br><span class="line"><span class="params">        dnn=<span class="literal">False</span>,  <span class="comment"># use OpenCV DNN for ONNX inference ç”¨OpenCV DNNé¢„æµ‹</span></span></span><br><span class="line"><span class="params">        </span>):</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>åˆå§‹åŒ–é…ç½®</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">################################################# 1. åˆå§‹åŒ–é…ç½® #####################################################</span></span><br><span class="line">    <span class="comment"># è¾“å…¥çš„è·¯å¾„å˜ä¸ºå­—ç¬¦ä¸²</span></span><br><span class="line">    source = <span class="built_in">str</span>(source)</span><br><span class="line">    <span class="comment"># æ˜¯å¦ä¿å­˜å›¾ç‰‡å’Œtxtæ–‡ä»¶</span></span><br><span class="line">    save_img = <span class="keyword">not</span> nosave <span class="keyword">and</span> <span class="keyword">not</span> source.endswith(<span class="string">&#x27;.txt&#x27;</span>)  <span class="comment"># save inference images</span></span><br><span class="line">    <span class="comment"># åˆ¤æ–­æ–‡ä»¶æ˜¯å¦æ˜¯è§†é¢‘æµ</span></span><br><span class="line">    <span class="comment"># Path()æå–æ–‡ä»¶å ä¾‹å¦‚ï¼šPath(&quot;./data/test_images/bus.jpg&quot;) Path.name-&gt;bus.jpg Path.parent-&gt;./data/test_images Path.suffix-&gt;.jpg</span></span><br><span class="line">    is_file = Path(source).suffix[<span class="number">1</span>:] <span class="keyword">in</span> (IMG_FORMATS + VID_FORMATS) <span class="comment"># æå–æ–‡ä»¶åç¼€åæ˜¯å¦ç¬¦åˆè¦æ±‚çš„æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼šæ˜¯å¦æ ¼å¼æ˜¯jpg, png, asf, aviç­‰</span></span><br><span class="line">    <span class="comment"># .lower()è½¬åŒ–æˆå°å†™ .upper()è½¬åŒ–æˆå¤§å†™ .title()é¦–å­—ç¬¦è½¬åŒ–æˆå¤§å†™ï¼Œå…¶ä½™ä¸ºå°å†™, .startswith(&#x27;http://&#x27;)è¿”å›True or Flase</span></span><br><span class="line">    is_url = source.lower().startswith((<span class="string">&#x27;rtsp://&#x27;</span>, <span class="string">&#x27;rtmp://&#x27;</span>, <span class="string">&#x27;http://&#x27;</span>, <span class="string">&#x27;https://&#x27;</span>))</span><br><span class="line">    <span class="comment"># .isnumeric()æ˜¯å¦æ˜¯ç”±æ•°å­—ç»„æˆï¼Œè¿”å›True or False</span></span><br><span class="line">    webcam = source.isnumeric() <span class="keyword">or</span> source.endswith(<span class="string">&#x27;.txt&#x27;</span>) <span class="keyword">or</span> (is_url <span class="keyword">and</span> <span class="keyword">not</span> is_file)</span><br><span class="line">    <span class="keyword">if</span> is_url <span class="keyword">and</span> is_file:</span><br><span class="line">        <span class="comment"># è¿”å›æ–‡ä»¶</span></span><br><span class="line">        source = check_file(source)  <span class="comment"># download</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Directories</span></span><br><span class="line">    <span class="comment"># é¢„æµ‹è·¯å¾„æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨æ–°å»ºï¼ŒæŒ‰ç…§å®éªŒæ–‡ä»¶ä»¥æ­¤é€’å¢æ–°å»º</span></span><br><span class="line">    save_dir = increment_path(Path(project) / name, exist_ok=exist_ok)  <span class="comment"># increment run</span></span><br><span class="line">    (save_dir / <span class="string">&#x27;labels&#x27;</span> <span class="keyword">if</span> save_txt <span class="keyword">else</span> save_dir).mkdir(parents=<span class="literal">True</span>, exist_ok=<span class="literal">True</span>)  <span class="comment"># make dir</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Load model</span></span><br><span class="line">    <span class="comment"># è·å–è®¾å¤‡ CPU/CUDA</span></span><br><span class="line">    device = select_device(device)</span><br><span class="line">    <span class="comment"># æ£€æµ‹ç¼–è¯‘æ¡†æ¶PYTORCH/TENSORFLOW/TENSORRT</span></span><br><span class="line">    model = DetectMultiBackend(weights, device=device, dnn=dnn, data=data)</span><br><span class="line">    stride, names, pt, jit, onnx, engine = model.stride, model.names, model.pt, model.jit, model.onnx, model.engine</span><br><span class="line">    <span class="comment"># ç¡®ä¿è¾“å…¥å›¾ç‰‡çš„å°ºå¯¸imgszèƒ½æ•´é™¤stride=32 å¦‚æœä¸èƒ½åˆ™è°ƒæ•´ä¸ºèƒ½è¢«æ•´é™¤å¹¶è¿”å›</span></span><br><span class="line">    imgsz = check_img_size(imgsz, s=stride)  <span class="comment"># check image size</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Half</span></span><br><span class="line">    <span class="comment"># å¦‚æœä¸æ˜¯CPUï¼Œä½¿ç”¨åŠè¿›åº¦(å›¾ç‰‡åŠç²¾åº¦/æ¨¡å‹åŠç²¾åº¦)</span></span><br><span class="line">    half &amp;= (pt <span class="keyword">or</span> jit <span class="keyword">or</span> onnx <span class="keyword">or</span> engine) <span class="keyword">and</span> device.<span class="built_in">type</span> != <span class="string">&#x27;cpu&#x27;</span>  <span class="comment"># FP16 supported on limited backends with CUDA</span></span><br><span class="line">    <span class="keyword">if</span> pt <span class="keyword">or</span> jit:</span><br><span class="line">        model.model.half() <span class="keyword">if</span> half <span class="keyword">else</span> model.model.<span class="built_in">float</span>()</span><br><span class="line">    <span class="comment"># TENSORRTåŠ é€Ÿ</span></span><br><span class="line">    <span class="keyword">elif</span> engine <span class="keyword">and</span> model.trt_fp16_input != half:</span><br><span class="line">        LOGGER.info(<span class="string">&#x27;model &#x27;</span> + (</span><br><span class="line">            <span class="string">&#x27;requires&#x27;</span> <span class="keyword">if</span> model.trt_fp16_input <span class="keyword">else</span> <span class="string">&#x27;incompatible with&#x27;</span>) + <span class="string">&#x27; --half. Adjusting automatically.&#x27;</span>)</span><br><span class="line">        half = model.trt_fp16_input</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>åŠ è½½æ•°æ®</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">################################################# 2. åŠ è½½æ•°æ® #####################################################</span></span><br><span class="line">    <span class="comment"># Dataloader åŠ è½½æ•°æ®</span></span><br><span class="line">    <span class="comment"># ä½¿ç”¨è§†é¢‘æµæˆ–è€…é¡µé¢</span></span><br><span class="line">    <span class="keyword">if</span> webcam:</span><br><span class="line">        view_img = check_imshow()</span><br><span class="line">        cudnn.benchmark = <span class="literal">True</span>  <span class="comment"># set True to speed up constant image size inference</span></span><br><span class="line">        dataset = LoadStreams(source, img_size=imgsz, stride=stride, auto=pt)</span><br><span class="line">        bs = <span class="built_in">len</span>(dataset)  <span class="comment"># batch_size</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="comment"># ç›´æ¥ä»sourceæ–‡ä»¶ä¸‹è¯»å–å›¾ç‰‡</span></span><br><span class="line">        dataset = LoadImages(source, img_size=imgsz, stride=stride, auto=pt)</span><br><span class="line">        bs = <span class="number">1</span>  <span class="comment"># batch_size</span></span><br><span class="line">    <span class="comment"># ä¿å­˜çš„è·¯å¾„</span></span><br><span class="line">    vid_path, vid_writer = [<span class="literal">None</span>] * bs, [<span class="literal">None</span>] * bs</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>è¾“å…¥é¢„æµ‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">model.warmup(imgsz=(<span class="number">1</span> <span class="keyword">if</span> pt <span class="keyword">else</span> bs, <span class="number">3</span>, *imgsz), half=half)  <span class="comment"># warmup</span></span><br><span class="line">   dt, seen = [<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>], <span class="number">0</span></span><br><span class="line">   <span class="keyword">for</span> path, im, im0s, vid_cap, s <span class="keyword">in</span> dataset:</span><br><span class="line">       t1 = time_sync()</span><br><span class="line">       <span class="comment"># è½¬åŒ–åˆ°GPUä¸Š</span></span><br><span class="line">       im = torch.from_numpy(im).to(device)</span><br><span class="line">       <span class="comment"># æ˜¯å¦ä½¿ç”¨åŠç²¾åº¦</span></span><br><span class="line">       im = im.half() <span class="keyword">if</span> half <span class="keyword">else</span> im.<span class="built_in">float</span>()  <span class="comment"># uint8 to fp16/32</span></span><br><span class="line">       im /= <span class="number">255</span>  <span class="comment"># 0 - 255 to 0.0 - 1.0</span></span><br><span class="line">       <span class="keyword">if</span> <span class="built_in">len</span>(im.shape) == <span class="number">3</span>:</span><br><span class="line">           <span class="comment"># å¢åŠ ä¸€ä¸ªç»´åº¦</span></span><br><span class="line">           im = im[<span class="literal">None</span>]  <span class="comment"># expand for batch dim</span></span><br><span class="line">       t2 = time_sync()</span><br><span class="line">       dt[<span class="number">0</span>] += t2 - t1</span><br><span class="line">     </span><br><span class="line">       <span class="comment"># Inference</span></span><br><span class="line">       <span class="comment"># å¯æ˜¯åŒ–æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">       visualize = increment_path(save_dir / Path(path).stem, mkdir=<span class="literal">True</span>) <span class="keyword">if</span> visualize <span class="keyword">else</span> <span class="literal">False</span></span><br><span class="line">       <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">       pred.shape=(1, num_boxes, 5+num_class)</span></span><br><span class="line"><span class="string">       h,wä¸ºä¼ å…¥ç½‘ç»œå›¾ç‰‡çš„é•¿å’Œå®½,æ³¨æ„datasetåœ¨æ£€æµ‹æ—¶ä½¿ç”¨äº†çŸ©å½¢æ¨ç†,æ‰€ä»¥è¿™é‡Œhä¸ä¸€å®šç­‰äºw</span></span><br><span class="line"><span class="string">       num_boxes = h/32 * w/32 + h/16 * w/16 + h/8 * w/8</span></span><br><span class="line"><span class="string">       pred[..., 0:4]ä¸ºé¢„æµ‹æ¡†åæ ‡=é¢„æµ‹æ¡†åæ ‡ä¸ºxywh(ä¸­å¿ƒç‚¹+å®½é•¿)æ ¼å¼</span></span><br><span class="line"><span class="string">       pred[..., 4]ä¸ºobjectnessç½®ä¿¡åº¦</span></span><br><span class="line"><span class="string">       pred[..., 5:-1]ä¸ºåˆ†ç±»ç»“æœ</span></span><br><span class="line"><span class="string">       &quot;&quot;&quot;</span></span><br><span class="line">       pred = model(im, augment=augment, visualize=visualize)</span><br><span class="line">       t3 = time_sync()</span><br><span class="line">       <span class="comment"># é¢„æµ‹çš„æ—¶é—´</span></span><br><span class="line">       dt[<span class="number">1</span>] += t3 - t2</span><br><span class="line">     </span><br></pre></td></tr></table></figure></li><li><p>NMS</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># NMS</span></span><br><span class="line">      <span class="comment"># éæå¤§å€¼æŠ‘åˆ¶</span></span><br><span class="line">      <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">      pred: ç½‘ç»œçš„è¾“å‡ºç»“æœ</span></span><br><span class="line"><span class="string">      conf_thres:ç½®ä¿¡åº¦é˜ˆå€¼</span></span><br><span class="line"><span class="string">      ou_thres:ioué˜ˆå€¼</span></span><br><span class="line"><span class="string">      classes: æ˜¯å¦åªä¿ç•™ç‰¹å®šçš„ç±»åˆ«</span></span><br><span class="line"><span class="string">      agnostic_nms: è¿›è¡Œnmsæ˜¯å¦ä¹Ÿå»é™¤ä¸åŒç±»åˆ«ä¹‹é—´çš„æ¡†</span></span><br><span class="line"><span class="string">      max-det: ä¿ç•™çš„æœ€å¤§æ£€æµ‹æ¡†æ•°é‡</span></span><br><span class="line"><span class="string">      ---NMS, é¢„æµ‹æ¡†æ ¼å¼: xywh(ä¸­å¿ƒç‚¹+é•¿å®½)--&gt;xyxy(å·¦ä¸Šè§’å³ä¸‹è§’)</span></span><br><span class="line"><span class="string">      predæ˜¯ä¸€ä¸ªåˆ—è¡¨list[torch.tensor], é•¿åº¦ä¸ºbatch_size</span></span><br><span class="line"><span class="string">      æ¯ä¸€ä¸ªtorch.tensorçš„shapeä¸º(num_boxes, 6), å†…å®¹ä¸ºbox + conf + cls</span></span><br><span class="line"><span class="string">      &quot;&quot;&quot;</span></span><br><span class="line">      pred = non_max_suppression(pred, conf_thres, iou_thres, classes, agnostic_nms, max_det=max_det)</span><br><span class="line">      <span class="comment"># é¢„æµ‹+NMSçš„æ—¶é—´</span></span><br><span class="line">      dt[<span class="number">2</span>] += time_sync() - t3</span><br><span class="line">     </span><br></pre></td></tr></table></figure></li><li><p>ä¿å­˜æ‰“å°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Process predictions</span></span><br><span class="line">        <span class="comment"># å¯¹æ¯å¼ å›¾ç‰‡åšå¤„ç†</span></span><br><span class="line">        <span class="keyword">for</span> i, det <span class="keyword">in</span> <span class="built_in">enumerate</span>(pred):  <span class="comment"># per image</span></span><br><span class="line">            seen += <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> webcam:  <span class="comment"># batch_size &gt;= 1</span></span><br><span class="line">                <span class="comment"># å¦‚æœè¾“å…¥æºæ˜¯webcamåˆ™batch_size&gt;=1 å–å‡ºdatasetä¸­çš„ä¸€å¼ å›¾ç‰‡</span></span><br><span class="line">                p, im0, frame = path[i], im0s[i].copy(), dataset.count</span><br><span class="line">                s += <span class="string">f&#x27;<span class="subst">&#123;i&#125;</span>: &#x27;</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="comment"># ä½†æ˜¯å¤§éƒ¨åˆ†æˆ‘ä»¬ä¸€èˆ¬éƒ½æ˜¯ä»LoadImagesæµè¯»å–æœ¬éƒ½æ–‡ä»¶ä¸­çš„ç…§ç‰‡æˆ–è€…è§†é¢‘ æ‰€ä»¥batch_size=1</span></span><br><span class="line">                <span class="comment"># p: å½“å‰å›¾ç‰‡/è§†é¢‘çš„ç»å¯¹è·¯å¾„ å¦‚ F:\yolo_v5\yolov5-U\data\images\bus.jpg</span></span><br><span class="line">                <span class="comment"># s: è¾“å‡ºä¿¡æ¯ åˆå§‹ä¸º &#x27;&#x27;</span></span><br><span class="line">                <span class="comment"># im0: åŸå§‹å›¾ç‰‡ letterbox + pad ä¹‹å‰çš„å›¾ç‰‡</span></span><br><span class="line">                <span class="comment"># frame: è§†é¢‘æµ</span></span><br><span class="line">                p, im0, frame = path, im0s.copy(), <span class="built_in">getattr</span>(dataset, <span class="string">&#x27;frame&#x27;</span>, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># å½“å‰è·¯å¾„yolov5/data/images/</span></span><br><span class="line">            p = Path(p)  <span class="comment"># to Path</span></span><br><span class="line">            <span class="comment"># å›¾ç‰‡/è§†é¢‘çš„ä¿å­˜è·¯å¾„save_path å¦‚ runs\\detect\\exp8\\bus.jpg</span></span><br><span class="line">            save_path = <span class="built_in">str</span>(save_dir / p.name)  <span class="comment"># im.jpg</span></span><br><span class="line">            <span class="comment"># è®¾ç½®ä¿å­˜æ¡†åæ ‡çš„txtæ–‡ä»¶è·¯å¾„ï¼Œæ¯å¼ å›¾ç‰‡å¯¹åº”ä¸€ä¸ªæ¡†åæ ‡ä¿¡æ¯</span></span><br><span class="line">            txt_path = <span class="built_in">str</span>(save_dir / <span class="string">&#x27;labels&#x27;</span> / p.stem) + (<span class="string">&#x27;&#x27;</span> <span class="keyword">if</span> dataset.mode == <span class="string">&#x27;image&#x27;</span> <span class="keyword">else</span> <span class="string">f&#x27;_<span class="subst">&#123;frame&#125;</span>&#x27;</span>)  <span class="comment"># im.txt</span></span><br><span class="line">            <span class="comment"># è®¾ç½®æ‰“å°å›¾ç‰‡çš„ä¿¡æ¯</span></span><br><span class="line">            s += <span class="string">&#x27;%gx%g &#x27;</span> % im.shape[<span class="number">2</span>:]  <span class="comment"># print string</span></span><br><span class="line">            gn = torch.tensor(im0.shape)[[<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>]]  <span class="comment"># normalization gain whwh</span></span><br><span class="line">            <span class="comment"># ä¿å­˜æˆªå›¾</span></span><br><span class="line">            imc = im0.copy() <span class="keyword">if</span> save_crop <span class="keyword">else</span> im0  <span class="comment"># for save_crop</span></span><br><span class="line">            annotator = Annotator(im0, line_width=line_thickness, example=<span class="built_in">str</span>(names))</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(det):</span><br><span class="line">                <span class="comment"># Rescale boxes from img_size to im0 size</span></span><br><span class="line">                <span class="comment"># å°†é¢„æµ‹ä¿¡æ¯æ˜ å°„åˆ°åŸå›¾</span></span><br><span class="line">                det[:, :<span class="number">4</span>] = scale_coords(im.shape[<span class="number">2</span>:], det[:, :<span class="number">4</span>], im0.shape).<span class="built_in">round</span>()</span><br><span class="line"></span><br><span class="line">                <span class="comment"># Print results</span></span><br><span class="line">                <span class="comment"># æ‰“å°æ£€æµ‹åˆ°çš„ç±»åˆ«æ•°é‡</span></span><br><span class="line">                <span class="keyword">for</span> c <span class="keyword">in</span> det[:, -<span class="number">1</span>].unique():</span><br><span class="line">                    n = (det[:, -<span class="number">1</span>] == c).<span class="built_in">sum</span>()  <span class="comment"># detections per class</span></span><br><span class="line">                    s += <span class="string">f&quot;<span class="subst">&#123;n&#125;</span> <span class="subst">&#123;names[<span class="built_in">int</span>(c)]&#125;</span><span class="subst">&#123;<span class="string">&#x27;s&#x27;</span> * (n &gt; <span class="number">1</span>)&#125;</span>, &quot;</span>  <span class="comment"># add to string</span></span><br><span class="line"></span><br><span class="line">                <span class="comment"># Write results</span></span><br><span class="line">                <span class="comment"># ä¿å­˜ç»“æœï¼š txt/å›¾ç‰‡ç”»æ¡†/crop-image</span></span><br><span class="line">                <span class="keyword">for</span> *xyxy, conf, cls <span class="keyword">in</span> <span class="built_in">reversed</span>(det):</span><br><span class="line">                    <span class="comment"># å°†æ¯ä¸ªå›¾ç‰‡çš„é¢„æµ‹ä¿¡æ¯åˆ†åˆ«å­˜å…¥save_dir/labelsä¸‹çš„xxx.txtä¸­ æ¯è¡Œ: class_id + score + xywh</span></span><br><span class="line">                    <span class="keyword">if</span> save_txt:  <span class="comment"># Write to file</span></span><br><span class="line">                        xywh = (xyxy2xywh(torch.tensor(xyxy).view(<span class="number">1</span>, <span class="number">4</span>)) / gn).view(-<span class="number">1</span>).tolist()  <span class="comment"># normalized xywh</span></span><br><span class="line">                        line = (cls, *xywh, conf) <span class="keyword">if</span> save_conf <span class="keyword">else</span> (cls, *xywh)  <span class="comment"># label format</span></span><br><span class="line">                        <span class="keyword">with</span> <span class="built_in">open</span>(txt_path + <span class="string">&#x27;.txt&#x27;</span>, <span class="string">&#x27;a&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">                            f.write((<span class="string">&#x27;%g &#x27;</span> * <span class="built_in">len</span>(line)).rstrip() % line + <span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">                    <span class="comment"># # åœ¨åŸå›¾ä¸Šç”»æ¡† + å°†é¢„æµ‹åˆ°çš„ç›®æ ‡å‰ªåˆ‡å‡ºæ¥ ä¿å­˜æˆå›¾ç‰‡ ä¿å­˜åœ¨save_dir/cropsä¸‹ åœ¨åŸå›¾åƒç”»å›¾æˆ–è€…ä¿å­˜ç»“æœ</span></span><br><span class="line">                    <span class="keyword">if</span> save_img <span class="keyword">or</span> save_crop <span class="keyword">or</span> view_img:  <span class="comment"># Add bbox to image</span></span><br><span class="line">                        c = <span class="built_in">int</span>(cls)  <span class="comment"># integer class</span></span><br><span class="line">                        label = <span class="literal">None</span> <span class="keyword">if</span> hide_labels <span class="keyword">else</span> (names[c] <span class="keyword">if</span> hide_conf <span class="keyword">else</span> <span class="string">f&#x27;<span class="subst">&#123;names[c]&#125;</span> <span class="subst">&#123;conf:<span class="number">.2</span>f&#125;</span>&#x27;</span>)</span><br><span class="line">                        annotator.box_label(xyxy, label, color=colors(c, <span class="literal">True</span>))</span><br><span class="line">                        <span class="keyword">if</span> save_crop:</span><br><span class="line">                            <span class="comment"># åœ¨åŸå›¾ä¸Šç”»æ¡† + å°†é¢„æµ‹åˆ°çš„ç›®æ ‡å‰ªåˆ‡å‡ºæ¥ ä¿å­˜æˆå›¾ç‰‡ ä¿å­˜åœ¨save_dir/cropsä¸‹</span></span><br><span class="line">                            save_one_box(xyxy, imc, file=save_dir / <span class="string">&#x27;crops&#x27;</span> / names[c] / <span class="string">f&#x27;<span class="subst">&#123;p.stem&#125;</span>.jpg&#x27;</span>, BGR=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># Stream results</span></span><br><span class="line">            im0 = annotator.result()</span><br><span class="line">            <span class="comment"># æ˜¾ç¤ºå›¾ç‰‡</span></span><br><span class="line">            <span class="keyword">if</span> view_img:</span><br><span class="line">                cv2.imshow(<span class="built_in">str</span>(p), im0)</span><br><span class="line">                cv2.waitKey(<span class="number">1</span>)  <span class="comment"># 1 millisecond</span></span><br><span class="line"></span><br><span class="line">            <span class="comment"># Save results (image with detections)</span></span><br><span class="line">            <span class="comment"># ä¿å­˜å›¾ç‰‡</span></span><br><span class="line">            <span class="keyword">if</span> save_img:</span><br><span class="line">                <span class="keyword">if</span> dataset.mode == <span class="string">&#x27;image&#x27;</span>:</span><br><span class="line">                    cv2.imwrite(save_path, im0)</span><br><span class="line">                <span class="keyword">else</span>:  <span class="comment"># &#x27;video&#x27; or &#x27;stream&#x27;</span></span><br><span class="line">                    <span class="keyword">if</span> vid_path[i] != save_path:  <span class="comment"># new video</span></span><br><span class="line">                        vid_path[i] = save_path</span><br><span class="line">                        <span class="keyword">if</span> <span class="built_in">isinstance</span>(vid_writer[i], cv2.VideoWriter):</span><br><span class="line">                            vid_writer[i].release()  <span class="comment"># release previous video writer</span></span><br><span class="line">                        <span class="keyword">if</span> vid_cap:  <span class="comment"># video</span></span><br><span class="line">                            fps = vid_cap.get(cv2.CAP_PROP_FPS)</span><br><span class="line">                            w = <span class="built_in">int</span>(vid_cap.get(cv2.CAP_PROP_FRAME_WIDTH))</span><br><span class="line">                            h = <span class="built_in">int</span>(vid_cap.get(cv2.CAP_PROP_FRAME_HEIGHT))</span><br><span class="line">                        <span class="keyword">else</span>:  <span class="comment"># stream</span></span><br><span class="line">                            fps, w, h = <span class="number">30</span>, im0.shape[<span class="number">1</span>], im0.shape[<span class="number">0</span>]</span><br><span class="line">                        save_path = <span class="built_in">str</span>(Path(save_path).with_suffix(<span class="string">&#x27;.mp4&#x27;</span>))  <span class="comment"># force *.mp4 suffix on results videos</span></span><br><span class="line">                        vid_writer[i] = cv2.VideoWriter(save_path, cv2.VideoWriter_fourcc(*<span class="string">&#x27;mp4v&#x27;</span>), fps, (w, h))</span><br><span class="line">                    vid_writer[i].write(im0)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Print time (inference-only)</span></span><br><span class="line">        LOGGER.info(<span class="string">f&#x27;<span class="subst">&#123;s&#125;</span>Done. (<span class="subst">&#123;t3 - t2:<span class="number">.3</span>f&#125;</span>s)&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul></li></ol><h3 id="å››ã€æ‰©å±•ä½¿ç”¨æ–¹æ³•"><a href="#å››ã€æ‰©å±•ä½¿ç”¨æ–¹æ³•" class="headerlink" title="å››ã€æ‰©å±•ä½¿ç”¨æ–¹æ³•"></a>å››ã€æ‰©å±•ä½¿ç”¨æ–¹æ³•</h3><ol><li><strong>åœ¨</strong><code>python</code><strong>æ–‡ä»¶ä¸­è¿è¡Œ</strong></li><li><strong>åŠ å…¥é¡¹ç›®ä½¿ç”¨</strong></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;YOLO-ä½¿ç”¨detect-py-æ¨ç†æ¨¡å‹&quot;&gt;&lt;a href=&quot;#YOLO-ä½¿ç”¨detect-py-æ¨ç†æ¨¡å‹&quot; class=&quot;headerlink&quot; title=&quot;YOLO: ä½¿ç”¨detect.py æ¨ç†æ¨¡å‹&quot;&gt;&lt;/a&gt;YOLO: ä½¿ç”¨detect.py æ¨ç†æ¨¡å‹</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>git:gitignoreæ–‡ä»¶</title>
    <link href="https://acgnliu.github.io/posts/a58ad574.html"/>
    <id>https://acgnliu.github.io/posts/a58ad574.html</id>
    <published>2023-03-16T13:18:34.000Z</published>
    <updated>2023-03-16T13:24:22.622Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Git-gitignoreæ–‡ä»¶çš„é…ç½®ä½¿ç”¨"><a href="#Git-gitignoreæ–‡ä»¶çš„é…ç½®ä½¿ç”¨" class="headerlink" title="[Git].gitignoreæ–‡ä»¶çš„é…ç½®ä½¿ç”¨"></a><code>[Git].gitignore</code>æ–‡ä»¶çš„é…ç½®ä½¿ç”¨</h1><h4 id="ä¸€ã€æ¦‚è¿°"><a href="#ä¸€ã€æ¦‚è¿°" class="headerlink" title="ä¸€ã€æ¦‚è¿°"></a>ä¸€ã€æ¦‚è¿°</h4><ul><li><code>.gitignore</code>æ–‡ä»¶ï¼š å¯ä»¥è®¾ç½®ç›¸åº”çš„å¿½ç•¥è§„åˆ™ï¼Œåœ¨ä½¿ç”¨<code>git add .</code>çš„æ—¶å€™å¿½ç•¥è¿™äº›æ–‡ä»¶çš„æäº¤ã€‚</li><li><code>git add -f</code>å¯ä»¥å¼ºåˆ¶æ·»åŠ è¢«<code>.gitignore</code>è®¾ç½®äº†å¿½ç•¥è§„åˆ™çš„æ–‡ä»¶</li><li><code>å¯ä½¿ç”¨git config --global core.excludesfile ~/.gitignore</code>æŒ‡ä»¤å®šä¹‰Gitå…¨å±€çš„ <code>.gitignore</code> æ–‡ä»¶</li><li>ä¹Ÿå¯ä»¥å½“å‰é¡¹ç›®ä¸‹çš„ <code>.git/info/exclude</code>æ–‡ä»¶ï¼Œå°†éœ€è¦å¿½ç•¥æäº¤çš„æ–‡ä»¶å†™å…¥å…¶ä¸­ï¼Œå·²å®ç°ç›¸åŒåŠŸèƒ½</li></ul><h5 id="äºŒã€ä½¿ç”¨æ–¹æ³•æ¼”ç¤º"><a href="#äºŒã€ä½¿ç”¨æ–¹æ³•æ¼”ç¤º" class="headerlink" title="äºŒã€ä½¿ç”¨æ–¹æ³•æ¼”ç¤º"></a>äºŒã€ä½¿ç”¨æ–¹æ³•æ¼”ç¤º</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># dir ä¸éœ€è¦æäº¤çš„ç›®å½•</span></span><br><span class="line">/node_modules</span><br><span class="line"></span><br><span class="line"><span class="comment"># file ä¸éœ€è¦æäº¤çš„æ–‡ä»¶</span></span><br><span class="line">config.ini</span><br><span class="line"></span><br><span class="line"><span class="comment"># log ä¸éœ€è¦æäº¤çš„ä»»æ„åŒ…å«åç¼€åä¸ºlogçš„æ–‡ä»¶</span></span><br><span class="line">*.log</span><br><span class="line"></span><br><span class="line"><span class="comment"># Package Files ä¸éœ€è¦æäº¤çš„ä»»æ„åŒ…å«åç¼€åä¸ºjarçš„æ–‡ä»¶</span></span><br><span class="line">*.jar</span><br></pre></td></tr></table></figure><h5 id="ä¸‰ã€ä½¿ç”¨æ–¹æ³•è¯¦è§£"><a href="#ä¸‰ã€ä½¿ç”¨æ–¹æ³•è¯¦è§£" class="headerlink" title="ä¸‰ã€ä½¿ç”¨æ–¹æ³•è¯¦è§£"></a>ä¸‰ã€ä½¿ç”¨æ–¹æ³•è¯¦è§£</h5><ol><li></li><li></li><li><p><strong><code>.gitignore</code>è¯­æ³•</strong></p><ul><li><code>#</code>ï¼š æ³¨é‡Š</li><li><code>*</code>ï¼š åŒ¹é…0ä¸ªæˆ–å¤šä¸ªä»»æ„å­—ç¬¦</li><li><code>!</code>ï¼š ä¸å¿½ç•¥ï¼Œä¾‹å¦‚ï¼š!1.txt,  è¡¨ç¤ºä¸å¿½ç•¥1.txtæ–‡ä»¶ï¼Œgit add å¯ä»¥æ­£å¸¸æ·»åŠ æ­¤æ–‡ä»¶ã€‚</li><li><code>\</code>:  ä»¥<code>\</code>å¼€å¤´è¡¨ç¤ºç›®å½•ï¼Œ ç›®å½•ä»¥<code>\</code>ç»“å°¾åªå¿½ç•¥ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œä¸å¿½ç•¥æ­¤ç›®å½•</li></ul></li></ol><p><a href="https://juejin.cn/post/7155653345813168142">https://juejin.cn/post/7155653345813168142</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Git-gitignoreæ–‡ä»¶çš„é…ç½®ä½¿ç”¨&quot;&gt;&lt;a href=&quot;#Git-gitignoreæ–‡ä»¶çš„é…ç½®ä½¿ç”¨&quot; class=&quot;headerlink&quot; title=&quot;[Git].gitignoreæ–‡ä»¶çš„é…ç½®ä½¿ç”¨&quot;&gt;&lt;/a&gt;&lt;code&gt;[Git].gitignore&lt;/c</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>yolov5ç¯å¢ƒæ­å»º</title>
    <link href="https://acgnliu.github.io/posts/2e7109a8.html"/>
    <id>https://acgnliu.github.io/posts/2e7109a8.html</id>
    <published>2023-03-16T13:16:07.000Z</published>
    <updated>2023-03-16T13:24:22.625Z</updated>
    
    <content type="html"><![CDATA[<h1 id="YOLOv5æ¨¡å‹ï¼š-ç¯å¢ƒéƒ¨ç½²"><a href="#YOLOv5æ¨¡å‹ï¼š-ç¯å¢ƒéƒ¨ç½²" class="headerlink" title="YOLOv5æ¨¡å‹ï¼š ç¯å¢ƒéƒ¨ç½²"></a>YOLOv5æ¨¡å‹ï¼š ç¯å¢ƒéƒ¨ç½²</h1><h3 id="ä¸€ã€ğŸ´æ€»æ¦‚è¿°-æ•™ç¨‹åŸæ–‡é“¾æ¥"><a href="#ä¸€ã€ğŸ´æ€»æ¦‚è¿°-æ•™ç¨‹åŸæ–‡é“¾æ¥" class="headerlink" title="ä¸€ã€ğŸ´æ€»æ¦‚è¿°  æ•™ç¨‹åŸæ–‡é“¾æ¥"></a>ä¸€ã€ğŸ´æ€»æ¦‚è¿°  <a href="https://aitechtogether.com/article/32386.html">æ•™ç¨‹åŸæ–‡é“¾æ¥</a></h3><ol><li>âœ¨GPU/CPUç¯å¢ƒè¯¦è§£åŠå®‰è£…</li><li>âœ¨GPU/CPUç¯å¢ƒè¯¦è§£åŠå®‰è£…</li><li>ğŸŒŸLabelimgæ•°æ®æ ‡æ³¨åŠæ•°æ®è½¬åŒ–</li></ol><h3 id="äºŒã€âœ¨GPU-CPUç¯å¢ƒè¯¦è§£åŠå®‰è£…"><a href="#äºŒã€âœ¨GPU-CPUç¯å¢ƒè¯¦è§£åŠå®‰è£…" class="headerlink" title="äºŒã€âœ¨GPU/CPUç¯å¢ƒè¯¦è§£åŠå®‰è£…"></a>äºŒã€âœ¨GPU/CPUç¯å¢ƒè¯¦è§£åŠå®‰è£…</h3><ol><li><p>ä»€ä¹ˆæ˜¯CPUï¼Ÿä»€ä¹ˆGPUï¼Ÿ</p><ul><li>CPUä¸»è¦ç”¨äºä¸²è¡Œè¿ç®—ï¼›è€ŒGPUåˆ™æ˜¯å¤§è§„æ¨¡å¹¶è¡Œè¿ç®—ã€‚ç”±äº<a href="https://aitechtogether.com/tag/æ·±åº¦å­¦ä¹ ">æ·±åº¦å­¦ä¹ </a>ä¸­æ ·æœ¬é‡å·¨å¤§ï¼Œå‚æ•°é‡ä¹Ÿå¾ˆå¤§ï¼Œæ‰€ä»¥GPUçš„ä½œç”¨å°±æ˜¯åŠ é€Ÿç½‘ç»œè¿ç®—</li><li>CPUè®¡ç®—ç¥ç»ç½‘ç»œä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œç®—å‡ºæ¥çš„ç¥ç»ç½‘ç»œæ”¾åˆ°å®é™…åº”ç”¨ä¸­æ•ˆæœä¹Ÿå¾ˆå¥½ï¼Œåªä¸è¿‡é€Ÿåº¦ä¼šå¾ˆæ…¢ç½¢äº†ã€‚è€Œç›®å‰GPUè¿ç®—ä¸»è¦é›†ä¸­åœ¨çŸ©é˜µä¹˜æ³•å’Œå·ç§¯ä¸Šï¼Œå…¶ä»–çš„é€»è¾‘è¿ç®—é€Ÿåº¦å¹¶æ²¡æœ‰CPUå¿«</li></ul></li><li><p>æˆ‘è¯¥é€‰æ‹©ä½¿ç”¨GPUè¿˜æ˜¯CPUï¼Ÿ</p><ul><li>GPUå’ŒCPUçš„é€‰æ‹©ä¸€æ–¹é¢çœ‹è‡ªå·±çš„éœ€æ±‚ï¼Œå¦ä¸€æ–¹é¢å–å†³äºè‡ªå·±çš„PCæ€§èƒ½ï¼ˆå¦‚æœä½ æ‹¥æœ‰ä¸€å—RTX3060ï¼Œè€Œä½ åˆšå¥½å¯¹æ·±åº¦å­¦ä¹ æ„Ÿå…´è¶£ï¼Œé‚£ä½ æœ‰ä»€ä¹ˆåˆ©ç”¨ä¸åˆ©ç”¨èµ·æ¥å®ƒå‘¢ï¼‰ã€‚</li></ul></li><li><p>æ€ä¹ˆå®‰è£…GPUç¯å¢ƒ</p><ol><li><p>å®‰è£…GPUç¯å¢ƒéœ€è¦æˆ‘ä»¬é¦–å…ˆå®‰è£…CUDAå’ŒCUDNN</p><ul><li>CUDA: ComputeUnified Device Architecture)ï¼Œæ˜¯æ˜¾å¡å‚å•†NVIDIAæ¨å‡ºçš„è¿ç®—å¹³å°ã€‚ CUDAæ˜¯ä¸€ç§ç”±NVIDIAæ¨å‡ºçš„é€šç”¨å¹¶è¡Œè®¡ç®—æ¶æ„ï¼Œè¯¥æ¶æ„ä½¿GPUèƒ½å¤Ÿè§£å†³å¤æ‚çš„è®¡ç®—é—®é¢˜ã€‚</li><li>CUDNN:NVIDIA cuDNNæ˜¯ç”¨äºæ·±åº¦ç¥ç»ç½‘ç»œçš„GPUåŠ é€Ÿåº“ã€‚å®ƒå¼ºè°ƒæ€§èƒ½ã€æ˜“ç”¨æ€§å’Œä½å†…å­˜å¼€é”€ã€‚</li></ul></li><li><p>â€‹    æŸ¥çœ‹æœ¬æœºæ˜¾å¡</p><ul><li>é¦–å…ˆæˆ‘ä»¬è¦ç¡®å®šæœ¬æœºæ˜¯å¦æœ‰ç‹¬ç«‹æ˜¾å¡ï¼Œåœ¨<code>è®¡ç®—æœºç®¡ç†-è®¾å¤‡ç®¡ç†å™¨-æ˜¾ç¤ºé€‚é…å™¨</code>ä¸­ï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰ç‹¬ç«‹æ˜¾å¡</li><li>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šå¯ä»¥çœ‹åˆ°æœ¬æœºæœ‰ä¸€ä¸ªé›†æˆæ˜¾å¡å’Œç‹¬ç«‹æ˜¾å¡<code>NVIDIA GetForce GTX 1050</code>ã€‚</li><li><img src="https://aitechtogether.com/wp-content/uploads/2022/05/954b992d-e5c0-4386-8586-9786586f4d55.webp" alt="img"></li></ul></li><li><p>â€‹    æŸ¥è¯¢æ˜¯å¦æ”¯æŒCUDAå®‰è£…</p><ol><li>è¿›å…¥ï¼š<a href="https://developer.nvidia.com/cuda-gpus">https://developer.nvidia.com/cuda-gpus</a> ï¼šä»ä¸‹å›¾ä¸­ï¼Œä»ä¸Šå›¾ä¸­ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘æœ¬æœºçš„ç‹¬ç«‹æ˜¾å¡æ˜¯æ”¯æŒ<code>CUDA</code>å®‰è£…çš„ï¼Œè®¡ç®—åŠ›æ˜¯<code>6.1</code>ã€‚<ul><li><img src="https://aitechtogether.com/wp-content/uploads/2022/05/80169db8-01f8-4886-bcca-e123f0194ee1.webp" alt="img"></li><li><img src="https://aitechtogether.com/wp-content/uploads/2022/05/f9c3701f-d144-469c-9b84-0110479b5fd9.webp" alt="img"></li></ul></li></ol></li><li><p>CUDAä¸‹è½½</p><ol><li>è¿›å…¥<a href="https://developer.nvidia.com/cuda-toolkit-archive">https://developer.nvidia.com/cuda-toolkit-archive</a> ï¼šåœ¨è¿™é‡Œä¼šæœ‰ä¼—å¤šCUDAç‰ˆæœ¬ï¼Œå…³äºå¦‚ä½•é€‰æ‹©ï¼Œæˆ‘ä¸èƒ½ç»™å‡ºè¯¦ç»†è¯´æ³•ï¼Œåªèƒ½è¯´è¯´æˆ‘çš„ç†è§£ã€‚ï¼ˆ<code>CUDAçš„å®‰è£…ä¸»è¦å–å†³äºä¸ªäººä½¿ç”¨è¦æ±‚å’Œç¡¬ä»¶æ€§èƒ½ï¼Œå¦‚ä½ æ˜¯RTX3060åŠä»¥ä¸Šçš„30ç³»æ˜¾å¡æˆ‘æ¨èä½ å®‰è£…CUDA11.xï¼Œå¦‚æœä½ åƒæˆ‘ä¸€æ ·æ˜¯RTX1050è¿™æ ·ä¸å¤ªé«˜ç«¯æ˜¾å¡ï¼Œé€‰æ‹©CUDA9.xå’ŒCUDA10.xå‡å¯ä»¥,ä»¥æˆ‘çš„ä¹ æƒ¯å°±æ˜¯ä¸‹è½½CUDA10.2</code>ï¼‰<ul><li><img src="https://aitechtogether.com/wp-content/uploads/2022/05/69ec64d1-f18d-40cb-a818-733503df572a.webp" alt="img"></li><li><em>ä»ä¸Šåˆ°ä¸‹<em>*ä¾æ¬¡å•å‡»é€‰æ‹©</em></em>ï¼š<code>Operating System</code>ã€<code>Architecture</code>ã€<code>Version</code>ã€<code>Installer Type</code>ã€â€œDownload`ã€‚ç­‰å¾…ä¸‹è½½ï¼Œä¸‹è½½å®Œæˆåä½ å°±ä¼šè·å¾—å®‰è£…åŒ…ã€‚</li><li><img src="https://aitechtogether.com/wp-content/uploads/2022/05/5cb89445-c851-4542-8420-28719126c663.webp" alt="img"></li></ul></li></ol></li><li><p>CUDAå®‰è£…</p><ol><li><p>åŒå‡»æ‰“å¼€ï¼Œæ˜¾ç¤ºè§£å‹å®‰è£…ç›®å½•ï¼Œ<strong>ä¸éœ€è¦æ”¹å˜ï¼Œé»˜è®¤å³å¯</strong>ã€‚</p><p><img src="https://aitechtogether.com/wp-content/uploads/2022/05/39e65fd2-1e5e-4804-b70a-14f84173c8b1.webp" alt="img"></p></li><li><p>é»˜è®¤å®‰è£…ï¼Œä¿è¯åç»­è¿‡ç¨‹ä¸ä¼šå‡ºç°å¤ªå¤šå…¶ä»–ä¸å¿…è¦çš„é—®é¢˜ï¼</p></li><li><p>æ¥ä¸‹æ¥ï¼Œè¿›å…¥<code>NVIDIA</code>å®‰è£…è¿‡ç¨‹ï¼Œåœ¨è¿™å®‰è£…è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä¸€å¼€å§‹ç›´æ¥é€‰æ‹©çš„ç²¾ç®€å®‰è£…ï¼Œå¦‚æœç”±äºVSçš„åŸå› ï¼Œå¯¼è‡´æ— æ³•æ­£å¸¸å®‰è£…ï¼Œå¯ä»¥æ¢æˆè‡ªå®šä¹‰çš„å®‰è£…æ–¹å¼ï¼Œå¹¶å°†VSå‹¾ç»™å»æ‰ï¼Œä¾¿å¯ä»¥æ­£å¸¸å®‰è£…äº†ï¼Œè‡³äºCUDAçš„å®‰è£…ç›®å½•ï¼Œå¤§å®¶é»˜è®¤å®‰è£…åœ¨Cç›˜å³å¯ã€‚</p></li><li><p><img src="https://aitechtogether.com/wp-content/uploads/2022/05/8663c9b2-e31a-4707-aa2e-bf564ffa3e41.webp" alt="img"></p></li></ol></li><li><p>CUDAç¯å¢ƒå˜é‡è®¾ç½®</p><ol><li><p>å®‰è£…å®Œæˆä¹‹åï¼Œä¾¿æ˜¯é…ç½®ç¯å¢ƒå˜é‡ã€‚æ–¹æ³•ä¸ºï¼š<code>å³é”®æˆ‘çš„ç”µè„‘</code>â€“<code>å±æ€§</code>â€“<code>é«˜çº§ç³»ç»Ÿè®¾ç½®</code>â€“<code>ç¯å¢ƒå˜é‡</code>â€“<code>ç³»ç»Ÿå˜é‡</code>â€“<code>æ‰¾åˆ°å˜é‡åä¸ºPATH</code>â€“<code>åŒå‡»æ‰“å¼€</code>ï¼Œæ·»åŠ ä»¥ä¸‹ç¯å¢ƒå˜é‡ã€‚</p><p><img src="https://aitechtogether.com/wp-content/uploads/2022/05/8104fb94-53b2-41e1-822a-0bd8bbef2c52.webp" alt="img"></p><ul><li><p>æ–°å¢å˜é‡</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v10.2</span><br><span class="line">C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v10.2\lib\x64</span><br><span class="line">C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v10.2\lib</span><br><span class="line">C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v10.2\libnvvp</span><br></pre></td></tr></table></figure></li><li><p>æµ‹è¯•å®‰è£…, æœ‰ä»¥ä¸‹è¾“å‡ºå³ä¸ºå®‰è£…æ­£ç¡®ï¼</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ nvcc -V</span><br><span class="line">nvcc: NVIDIA (R) Cuda compiler driver</span><br><span class="line">Copyright (c) 2005-2019 NVIDIA Corporation</span><br><span class="line">Built on Wed_Oct_23_19:32:27_Pacific_Daylight_Time_2019</span><br><span class="line">Cuda compilation tools, release 10.2, V10.2.89</span><br></pre></td></tr></table></figure></li></ul></li></ol></li><li><p>CUDNNä¸‹è½½</p><ol><li><p>è¿›å…¥<a href="https://developer.nvidia.com/zh-cn/cudnn">https://developer.nvidia.com/zh-cn/cudnn</a> ï¼Œç‚¹å‡»<code>ä¸‹è½½cuDNN</code>ä¼šå‡ºç°</p></li><li><p>è¿™é‡Œå†™çš„å¾ˆæ˜ç™½ï¼Œå°±æ˜¯å¿…é¡»ä½ æ³¨å†Œç™»å½•è´¦æˆ·æ‰æœ‰èµ„æ ¼ä¸‹è½½ï¼Œå› æ­¤ä½ æ³¨å†Œä¸€ä¸ªè´¦æˆ·ç™»å½•è¿›å»å³å¯ï¼</p><p><img src="https://aitechtogether.com/wp-content/uploads/2022/05/b99810f8-f1dc-47a8-aa4e-ab32b51fdcdd.webp" alt="img"></p></li><li><p>ç™»å½•è¿›å»ä»¥åï¼Œç‚¹å‡»é€‰æ‹©ç›¸åº”çš„ä¸‹è½½å³å¯ï¼Œä½†æ˜¯è¦æ³¨æ„ï¼š<strong>CUDAçš„ç‰ˆæœ¬ä¸CUDNNçš„ç‰ˆæœ¬è¦ä¸€è‡´</strong></p><ul><li>åœ¨è¦ä¸‹è½½çš„CUDNNçš„ç‚¹å‡»åç§°æœ€åä¼šæœ‰<code>CUDA 10.0</code>æˆ–è€…<code>CUDA 10.2</code>è¿™æ ·çš„åç¼€ï¼Œè¿™å°±æ˜¯ä»£è¡¨ä¸ç›¸åº”CUDAå¯¹åº”ç‰ˆæœ¬çš„CUDNNã€‚</li></ul></li></ol></li><li><p>CUDNNå®‰è£…</p><ol><li>ä¸‹è½½ä¹‹åï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªzipçš„å‹ç¼©åŒ…ã€‚è§£å‹ç¼©ï¼Œå°†CUDNNå‹ç¼©åŒ…é‡Œé¢çš„<code>bin</code>ã€<code>include</code>ã€<code>lib</code>ä¸‰æ•´ä¸ªæ–‡ä»¶å¤¹ç›´æ¥å¤åˆ¶åˆ°<code>CUDAçš„å®‰è£…ç›®å½•</code>ä¸‹ï¼Œ<strong>è¦†ç›–æ‰åŸæ¥CUDAçš„è¿™ä¸‰ä¸ªæ–‡ä»¶å¤¹</strong> å³å¯ã€‚</li></ol></li><li><p>GPUç‰ˆæœ¬çš„Pytorchå®‰è£…</p><ol><li><p>ğŸŸ¢åœ¨çº¿å®‰è£…</p><ol><li><p>æœ‰äº†æœ¬åœ°çš„GPUç¯å¢ƒï¼Œæˆ‘ä»¬å°±å¯ä»¥å®‰è£…<code>GPUç‰ˆæœ¬çš„Pytorchäº†</code>ã€‚è¿›å…¥<a href="https://pytorch.org/">https://pytorch.org/</a> ï¼Œç‚¹å‡»<code>INXTALL</code>ï¼š</p><p><img src="https://aitechtogether.com/wp-content/uploads/2022/05/d563d4be-abff-484f-b47e-88ffb8e25a6b.webp" alt="img"></p></li><li><p>æ ¹æ®è‡ªå·±çš„éœ€æ±‚å’Œå®‰è£…çš„CUDAçš„ç‰ˆæœ¬å¯¹åº”å®‰è£…Pytorchï¼Œå¤åˆ¶è¾“å‡ºçš„å‘½ä»¤å³å¯ã€‚å¦‚æœä¸‹æ–¹<strong>Run this Command</strong>æé†’<strong>CUDA-10.2 PyTorch builds are no longer available for Windows, please use CUDA-11.3 ï¼Œ</strong> å¯ä»¥è®¿é—®ï¼š<a href="https://pytorch.org/get-started/previous-versions/">https://pytorch.org/get-started/previous-versions/</a> æŸ¥æ‰¾ä¹‹å‰çš„ç‰ˆæœ¬åœ¨çº¿å®‰è£…ã€‚</p></li></ol></li><li><p>ğŸŸ¡ç¦»çº¿å®‰è£…</p><ol><li><p>ğŸ“Œ æ–¹æ³•ä¸€ï¼šè¿›å…¥å®˜ç½‘ä¸‹è½½åœ°å€ï¼Œ<a href="https://download.pytorch.org/whl/torch/">torchå®‰è£…åŒ…åˆ—è¡¨</a> | <a href="https://download.pytorch.org/whl/torchvision/">torchvisionå®‰è£…åŒ…åˆ—è¡¨</a></p></li><li><p>ğŸ“Œ æ–¹æ³•äºŒï¼šè¿›å…¥å®˜ç½‘æŒ‡å®šçš„CUDAç‰ˆæœ¬ä¸‹è½½åœ°å€ï¼š<a href="https://download.pytorch.org/whl/cu113/torch_stable.html">https://download.pytorch.org/whl/cu113/torch_stable.html</a> ï¼ˆä»¥CUDA11.3ä¸ºä¾‹ï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># æ ‡*éƒ¨åˆ†å¯ä»¥æ ¹æ®è‡ªå·±çš„CUDAå‹å·è¿›è¡Œæœç´¢ï¼Œæ¯”å¦‚CUDA 10.2å¯¹åº”ä¸º102ï¼ŒCUDA11.3å¯¹åº”ä¸º113</span><br><span class="line">https://download.pytorch.org/whl/cu***/torch_stable.html</span><br></pre></td></tr></table></figure></li><li><p>æ ¹æ®è‡ªå·±çš„å®éªŒç¯å¢ƒï¼ŒåŒ…æ‹¬æ“ä½œç³»ç»Ÿã€CUDAç±»å‹ã€Pythonç‰ˆæœ¬ç­‰ï¼Œé€‰æ‹©å®‰è£…çš„<code>torch</code>å’Œ<code>torchvision</code>çš„å®‰è£…åŒ…</p><p><img src="https://aitechtogether.com/wp-content/uploads/2022/05/fa5f2c6f-cd72-46b9-a489-90b1bf44af19.webp" alt="img"></p></li><li><p>```python<br>pip install ./torch-<strong><em>.whl # å…ˆå®‰è£…<br>pip install ./torchvision-</em></strong>.whl # åå®‰è£…</p><h1 id="æ³¨æ„ï¼šè¿™é‡Œå­˜åœ¨å®‰è£…é¡ºåºï¼Œç”±äºtorchæ˜¯torchvisionçš„ä¸Šçº§å®‰è£…åŒ…ï¼Œå¦‚æœå…ˆå®‰è£…torchvisionï¼Œåˆ™ä¼šè‡ªåŠ¨ä¸‹è½½torchå®‰è£…-åŒ…ã€‚å› æ­¤å…ˆå®‰è£…torchï¼Œå†å®‰è£…torchvision"><a href="#æ³¨æ„ï¼šè¿™é‡Œå­˜åœ¨å®‰è£…é¡ºåºï¼Œç”±äºtorchæ˜¯torchvisionçš„ä¸Šçº§å®‰è£…åŒ…ï¼Œå¦‚æœå…ˆå®‰è£…torchvisionï¼Œåˆ™ä¼šè‡ªåŠ¨ä¸‹è½½torchå®‰è£…-åŒ…ã€‚å› æ­¤å…ˆå®‰è£…torchï¼Œå†å®‰è£…torchvision" class="headerlink" title="æ³¨æ„ï¼šè¿™é‡Œå­˜åœ¨å®‰è£…é¡ºåºï¼Œç”±äºtorchæ˜¯torchvisionçš„ä¸Šçº§å®‰è£…åŒ…ï¼Œå¦‚æœå…ˆå®‰è£…torchvisionï¼Œåˆ™ä¼šè‡ªåŠ¨ä¸‹è½½torchå®‰è£…# åŒ…ã€‚å› æ­¤å…ˆå®‰è£…torchï¼Œå†å®‰è£…torchvision"></a>æ³¨æ„ï¼šè¿™é‡Œå­˜åœ¨å®‰è£…é¡ºåºï¼Œç”±äºtorchæ˜¯torchvisionçš„ä¸Šçº§å®‰è£…åŒ…ï¼Œå¦‚æœå…ˆå®‰è£…torchvisionï¼Œåˆ™ä¼šè‡ªåŠ¨ä¸‹è½½torchå®‰è£…# åŒ…ã€‚å› æ­¤å…ˆå®‰è£…torchï¼Œå†å®‰è£…torchvision</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">         5. ğŸ‘‰æœ€åï¼Œç»™å¤§å®¶æ”¾ä¸€ä¸ªPytorchå’Œtorchvisionå¯¹åº”çš„ç‰ˆæœ¬è¡¨ï¼šhttps://github.com/pytorch/pytorch/wiki/PyTorch-Versions</span><br><span class="line"></span><br><span class="line">            è‡³æ­¤ï¼Œæ‰€æœ‰æ¯”è¾ƒéº»çƒ¦çš„ç¯å¢ƒå®‰è£…é—®é¢˜åŸºæœ¬è§£å†³å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥å»æ‰¾æ•°æ®ã€æ ‡æ•°æ®ã€è®­æ•°æ®äº†ã€‚</span><br><span class="line"></span><br><span class="line">      </span><br><span class="line"></span><br><span class="line">## ä¸‰ã€ğŸŒŸLabelimgæ•°æ®æ ‡æ³¨åŠæ•°æ®è½¬åŒ–</span><br><span class="line"></span><br><span class="line">1. åˆè¯†Labelimg</span><br><span class="line"></span><br><span class="line">   - ç”¨äºæ·±åº¦ç½‘ç»œè®­ç»ƒçš„æ•°æ®é›†åšæ ‡æ³¨çš„æ–¹æ³•å’Œå·¥å…·æœ‰å¥½å¤šï¼ŒåƒLabelmeã€labelImgã€yolo_markã€Vaticã€Slothç­‰ç­‰ï¼Œæ­¤å¤„æš‚æ—¶åªä»‹ç»å…¶ä¸­çš„ä¸€ç§æ ‡æ³¨å·¥å…·ï¼šlabelImgã€‚ğŸ‘ï¸â€ğŸ—¨ï¸[ä¸­æ–‡ç‰ˆæœ¬çš„labelImgä¸‹è½½](https://mianbaoduo.com/o/bread/mbd-YpqZm5lx)</span><br><span class="line"></span><br><span class="line">     ![img](https://aitechtogether.com/wp-content/uploads/2022/05/3f601c82-5884-485f-9096-5e4d761ef477.webp)</span><br><span class="line"></span><br><span class="line">   - [Labelimg](https://github.com/tzutalin/labelImg) æ˜¯ä¸€æ¬¾å¼€æºçš„æ•°æ®æ ‡æ³¨å·¥å…·ï¼Œå¯ä»¥æ ‡æ³¨ä¸‰ç§æ ¼å¼ï¼š</span><br><span class="line"></span><br><span class="line">     1. PascalVOCæ ‡ç­¾æ ¼å¼ï¼Œä¿å­˜ä¸ºxmlæ–‡ä»¶</span><br><span class="line">     2. YOLOæ ‡ç­¾æ ¼å¼ï¼Œä¿å­˜ä¸ºtxtæ–‡ä»¶</span><br><span class="line">     3. CreateMLæ ‡ç­¾æ ¼å¼ï¼Œä¿å­˜ä¸ºjsonæ–‡ä»¶images</span><br><span class="line"></span><br><span class="line">2. Labelimgæ ‡æ³¨</span><br><span class="line"></span><br><span class="line">   1. æˆ‘ä»¬æ‰¾ä¸€ä¸ªæ–°çš„ä½ç½®ï¼Œæ–°å»ºä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼šå­˜æ”¾å›¾ç‰‡ï¼š`images`ï¼Œå­˜æ”¾æ ‡ç­¾ï¼š`labels`ï¼Œç„¶åæ‰“å¼€labelimgè¿›è¡Œæ ‡æ³¨å°±å¯ä»¥äº†ã€‚</span><br><span class="line"></span><br><span class="line">      ```bash</span><br><span class="line">      .</span><br><span class="line">      â”‚</span><br><span class="line">      â”œâ”€images</span><br><span class="line">      â”œâ”€ 1.jpg</span><br><span class="line">          â”œâ”€ 2.jpg</span><br><span class="line">          â”œâ”€ 3.jpg</span><br><span class="line">              ...</span><br><span class="line">      â””â”€labels</span><br><span class="line">      â”œâ”€ 1.txt</span><br><span class="line">          â”œâ”€ 2.txt</span><br><span class="line">          â”œâ”€ 3.txt</span><br><span class="line">      </span><br><span class="line">      # æ³¨æ„å¦‚æœä½ å‘ç°ä½ çš„å›¾ç‰‡çš„åç¼€ä¸ä¸€è‡´ï¼Œæœ€å¥½æ˜¯ä¿®æ”¹æˆä¸€æ ·çš„ï¼Œé¿å…åç»­çš„éº»çƒ¦ï¼ï¼ï¼ï¼ˆå¯ä»¥çœ‹åˆ°æˆ‘è¿™é‡ŒJPEGImagesæ–‡ä»¶å¤¹ä¸‹éƒ½æ˜¯.jpgç»“å°¾çš„ï¼‰</span><br><span class="line">      # bachè„šæœ¬ï¼ˆè¿™é‡Œçš„æ„æ€æ˜¯å°†.jpgä¿®æ”¹æˆ.jpegï¼‰ </span><br><span class="line">      &gt;&gt;&gt;ren *.jpg *.jpeg </span><br><span class="line">        </span><br></pre></td></tr></table></figure></li></ol></li></ol></li><li><p>è¶…çº§è¯¦ç»†çš„æ ‡æ³¨è¿‡ç¨‹çœ‹è¿™é‡Œï¼š<a href="https://blog.csdn.net/shuiyixin/article/details/82623613">YOLOæ•°æ®é›†åˆ¶ä½œ1ï¼ˆå«LabelImgå·¥å…·è®²è§£ï¼‰</a></p></li></ol></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;YOLOv5æ¨¡å‹ï¼š-ç¯å¢ƒéƒ¨ç½²&quot;&gt;&lt;a href=&quot;#YOLOv5æ¨¡å‹ï¼š-ç¯å¢ƒéƒ¨ç½²&quot; class=&quot;headerlink&quot; title=&quot;YOLOv5æ¨¡å‹ï¼š ç¯å¢ƒéƒ¨ç½²&quot;&gt;&lt;/a&gt;YOLOv5æ¨¡å‹ï¼š ç¯å¢ƒéƒ¨ç½²&lt;/h1&gt;&lt;h3 id=&quot;ä¸€ã€ğŸ´æ€»æ¦‚è¿°-æ•™ç¨‹åŸæ–‡é“¾æ¥&quot;&gt;&lt;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>æ­£åˆ™è¡¨è¾¾å¼</title>
    <link href="https://acgnliu.github.io/posts/2f57a694.html"/>
    <id>https://acgnliu.github.io/posts/2f57a694.html</id>
    <published>2022-11-15T14:29:20.000Z</published>
    <updated>2022-11-17T16:19:50.529Z</updated>
    
    <content type="html"><![CDATA[<p><h3> ä¸€. ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æŸ¥æ‰¾æ–‡æœ¬æ¨¡å¼<h3></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å­—ç¬¦ä¸²</span></span><br><span class="line">regex_str = <span class="string">&quot;1. wubba lubba dub dubs. 2. Hey, what are you in for? - Everyting. 3. Homework is stupid, the whole point is to get less of it.&quot;</span></span><br></pre></td></tr></table></figure><p><h4>1ã€æ­£åˆ™æ“ä½œæ­¥éª¤<h4></p><ul><li>åŸºç¡€æµç¨‹å¦‚ä¸‹<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">regex = re.<span class="built_in">compile</span>(<span class="string">&#x27;\d&#x27;</span>)        <span class="comment"># æ­£åˆ™è¡¨è¾¾å¼</span></span><br><span class="line">result = regex.search(regex_str)    <span class="comment"># æŸ¥æ‰¾</span></span><br><span class="line"><span class="built_in">print</span>(result.group())   <span class="comment"># è¿”å›ç»“æœ</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿è¡Œç»“æœï¼š 1</span></span><br></pre></td></tr></table></figure></li><li>æµç¨‹è§£æ <br><ol><li>å¯¼å…¥<code>re</code>æ¨¡å—</li><li>ä¼ å…¥æ­£åˆ™è¡¨è¾¾å¼ï¼Œè¿”å›å€¼ä¸º<code>regex</code>å¯¹è±¡ã€‚</li><li>ä½¿ç”¨<code>regex</code>å¯¹è±¡æ–¹æ³•ï¼ˆ<code>search</code>ï¼‰æŸ¥æ‰¾åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ï¼Œ è¿”å›<code>Match</code>å¯¹è±¡</li><li>ä½¿ç”¨<code>Match</code>å¯¹è±¡çš„æ–¹æ³•ï¼ˆ<code>group</code>ï¼‰è·å–åŒ¹é…çš„å€¼ã€‚</li></ol></li><li><strong>çŸ¥è¯†ç‚¹ 01 å­—ç¬¦æ›¿æ¢</strong><ol><li><code>\d</code>: è¡¨ç¤ºä¸€ä¸ªæ•°å­— 0~9</li><li><code>\w</code>: è¡¨ç¤ºä¸€ä¸ªä¸‹åˆ’çº¿ã€æ•°å­—ã€æˆ–å­—æ¯</li><li><code>\s</code>: è¡¨ç¤ºä¸€ä¸ªç©ºæ ¼ã€åˆ¶è¡¨ã€æ¢è¡Œ</li></ol></li></ul><p><h4>2ã€åˆ†ç»„ <h4></p><ul><li>ä»£ç æ¼”ç¤º<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">regex = re.<span class="built_in">compile</span>(<span class="string">&quot;(\d).*(\d).*(\d)&quot;</span>)  <span class="comment"># åˆ†ä¸‰ç»„</span></span><br><span class="line">result = regex.search(regex_str)</span><br><span class="line"><span class="built_in">print</span>(result.group())</span><br><span class="line"><span class="comment"># è¿è¡Œç»“æœï¼š1. wubba lubba dub dubs. Hey, 2. what are you in for? - Everyting. 3</span></span><br><span class="line"><span class="built_in">print</span>(result.group(<span class="number">1</span>))  <span class="comment"># æ‰“å°åŒ¹é…åˆ°çš„ç¬¬ä¸€ç»„çš„å€¼</span></span><br><span class="line"><span class="comment"># è¿è¡Œç»“æœï¼š 1  </span></span><br><span class="line"><span class="built_in">print</span>(result.groups())  <span class="comment"># æ‰“å°åŒ¹é…åˆ°çš„æ‰€æœ‰ç»„çš„å€¼</span></span><br><span class="line"><span class="comment"># è¿è¡Œç»“æœï¼š(&#x27;1&#x27;, &#x27;2&#x27;, &#x27;3&#x27;)</span></span><br></pre></td></tr></table></figure><strong>- çŸ¥è¯†ç‚¹ 2 æ‹¬å·</strong></li></ul><ol><li>ç¬¬ä¸€ä¸ªæ‹¬å·å†…çš„è¡¨è¾¾å¼ä¸ºç¬¬ä¸€ç»„ï¼Œå¯ä½¿ç”¨<code>group(1)</code>å–å€¼</li><li><code>groups()</code> è·å–æ‰€æœ‰åˆ†ç»„ã€‚</li></ol><p><h4>3ã€å­—ç¬¦<h4></p><ul><li>ä»£ç æ¼”ç¤º<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">regex = re.<span class="built_in">compile</span>(<span class="string">&quot;(b)&#123;2&#125;&quot;</span>)  <span class="comment"># åˆ†ä¸‰ç»„</span></span><br><span class="line">result = regex.search(regex_str)</span><br><span class="line"><span class="built_in">print</span>(result.group())</span><br><span class="line"><span class="comment"># è¿è¡Œç»“æœï¼š bb</span></span><br><span class="line"><span class="built_in">print</span>(result.groups())</span><br><span class="line"><span class="comment"># è¿è¡Œç»“æœ: (&#x27;b&#x27;,)</span></span><br></pre></td></tr></table></figure><strong>- çŸ¥è¯†ç‚¹ 3 è´ªå¿ƒåŒ¹é…</strong></li></ul><ol><li><code>()&#123;N&#125;</code> è¡¨ç¤ºåŒ¹é…æ‹¬å·å†…è¡¨è¾¾å¼ Næ¬¡ã€‚</li><li><code>()&#123;1,3&#125;</code> ä¼˜å…ˆåŒ¹é…3æ¬¡</li><li><code>()&#123;1,&#125;</code> ä¼˜å…ˆé…å¯¹æœ€å¤§å€¼(<code>max</code>)</li><li><code>()&#123;,2&#125;</code> ä¼˜å…ˆé…å¯¹2æ¬¡ï¼Œ(<em>æ‰¾ä¸åˆ°å€¼åˆ™è¿”å›ä¸º<code>None</code></em>)</li><li><code>()&#123;1,3&#125;?</code> éè´ªå¿ƒåŒ¹é…</li></ol><p><h4>4ã€é€šé…ç¬¦<h4></p><ol><li><code>+</code>ï¼š åŠ å·è¡¨ç¤ºåŒ¹é…ä¸€æ¬¡æˆ–å¤šæ¬¡ã€‚</li><li><code>*</code>ï¼š æ˜Ÿå·è¡¨ç¤ºåŒ¹é…é›¶æ¬¡æˆ–å¤šæ¬¡ã€‚</li><li><code>?</code>ï¼š é—®å·è¡¨ç¤ºåŒ¹é…é›¶æ¬¡æˆ–ä¸€æ¬¡ã€‚</li><li><code>.</code>:  è¡¨ç¤ºä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼Œéæ¢è¡Œç¬¦ä¹‹å¤–çš„æ‰€æœ‰å­—ç¬¦</li><li><code>^a</code>ï¼šè¡¨ç¤ºä»¥aå¼€å¤´çš„å­—ç¬¦ã€‚</li><li><code>$a</code>: è¡¨ç¤ºä»¥aç»“å°¾çš„å­—ç¬¦ã€‚</li><li><code>&#123;N&#125;</code>: è¡¨ç¤ºåŒ¹é…æ¬¡æ•°ã€‚</li><li><code>[auc]</code>: è¡¨ç¤ºå•å­—ç¬¦é€‰æ‹©èŒƒå›´(<code>a u c</code>)</li><li><code>[^auc]</code>:è¡¨ç¤ºå•å­—ç¬¦é€‰æ‹©èŒƒå›´(é™¤<code>a u c</code>å¤–å­—ç¬¦)</li></ol><p><h4>5ã€æ‰©å±•<h4></p><ul><li><p>ä»£ç æ¼”ç¤ºï¼Œ<code>compile</code> å‚æ•°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">regex = re.<span class="built_in">compile</span>(<span class="string">&quot;.*&quot;</span>, re.DOTALL) <span class="comment"># åŒ¹é…æ‰€æœ‰å­—ç¬¦ï¼ŒåŒ…æ‹¬æ¢è¡Œç¬¦</span></span><br><span class="line"></span><br><span class="line">regex = re.<span class="built_in">compile</span>(<span class="string">&quot;aAsA&quot;</span>, re.IGNORECASE)    <span class="comment"># ä¸åŒºåˆ†å¤§å°å†™</span></span><br><span class="line"></span><br><span class="line">regex = re.<span class="built_in">compile</span>(<span class="string">&#x27;&#x27;&#x27;(wubba).*  # æ³¨é‡Š</span></span><br><span class="line"><span class="string">(dub)  # æ³¨é‡Š&#x27;&#x27;&#x27;</span>, re.VERBOSE)  </span><br><span class="line">result = regex.search(regex_str)</span><br><span class="line"><span class="comment">#è¿è¡Œç»“æœ: wubba lubbba dub dub</span></span><br><span class="line"><span class="built_in">print</span>(result.group())</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>ä»£ç æ¼”ç¤ºï¼Œ <code>re</code> åŸºç¡€æ–¹æ³•</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">regex = re.<span class="built_in">compile</span>(<span class="string">&quot;(\d)(bb)&quot;</span>)</span><br><span class="line">regex.sub(<span class="string">&quot;www&quot;</span>, <span class="string">&quot;111bbbb, 111&quot;</span>) </span><br><span class="line"><span class="comment">#è¿è¡Œç»“æœ: 11wwwbb, 111</span></span><br><span class="line"></span><br><span class="line">regex.sub(<span class="string">&quot;\2***&quot;</span>, <span class="string">&quot;111bbbb, 111&quot;</span>)</span><br><span class="line"><span class="comment">#è¿è¡Œç»“æœ: 11***bb, 111</span></span><br><span class="line"></span><br><span class="line">result = re.<span class="keyword">match</span>(<span class="string">&quot;\w\d\w&quot;</span>, <span class="string">&quot;111 11111 111&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(result.group())</span><br><span class="line"><span class="comment">#è¿è¡Œç»“æœ: 111</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;h3&gt; ä¸€. ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æŸ¥æ‰¾æ–‡æœ¬æ¨¡å¼&lt;h3&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span cl</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>git</title>
    <link href="https://acgnliu.github.io/posts/518e617c.html"/>
    <id>https://acgnliu.github.io/posts/518e617c.html</id>
    <published>2022-11-14T15:57:00.000Z</published>
    <updated>2022-11-14T16:26:27.031Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Git-å­¦ä¹ ç¬”è®°"><a href="#Git-å­¦ä¹ ç¬”è®°" class="headerlink" title="Git å­¦ä¹ ç¬”è®°"></a>Git å­¦ä¹ ç¬”è®°</h3><ol><li><p><code>git</code> åŸºæœ¬ä»‹ç» <br></p><ul><li><p>æ˜¯ä»€ä¹ˆ <br></p><ol><li>ä¸€ä¸ªä»£ç ç®¡ç†çš„å·¥å…·ã€‚</li><li>å¯ä»¥éšæ—¶å°†æœ¬åœ°ä»“åº“çš„ä»£ç æäº¤è‡³è¿œç¨‹ä»“åº“</li><li><em>æ‡’å¾—æ‰“å­—</em></li></ol></li><li><p>æµç¨‹</p><ol><li>ä¸‹è½½å®‰è£…å¹¶é…ç½®git</li><li>ç”Ÿæˆå¯†é’¥å¯¹ï¼š<em>å…¬é’¥</em> - <code>id_rsa.pub</code>  <em>ç§é’¥</em> - <code>id_rsa</code></li><li>åˆ›å»ºè¿œç¨‹ä»“åº“ï¼Œä¸Šä¼ å…¬é’¥ã€‚</li><li>å…‹éš†ä»£ç åˆ°æœ¬åœ°</li><li>æäº¤ä»£ç .</li></ol></li></ul></li><li><code>git</code> ä¸‹è½½ä¸å®‰è£…ã€‚ <br><ul><li>æŒ‡ä»¤</li><li><code>git version</code>: æŸ¥çœ‹ç‰ˆæœ¬å·</li><li>æ³¨ï¼š <code>MAC éœ€è¦å®‰è£…ä¸€ä¸‹xcode: xcode-select --install</code></li></ul></li><li><code>git</code> é…ç½® <br><ul><li><code>git config --list</code>: æŸ¥çœ‹gitå½“å‰çš„configé…ç½®</li><li><code>ssh-keygen -t rsa -C â€œyour_email@youremail.com&quot;</code>: ç”Ÿæˆå¯†é’¥å¯¹ã€‚</li><li><code>git clone git@github.com:Yourcount/GitTest.ogt</code>: å…‹éš†è¿œç¨‹ä»“åº“ã€‚</li></ul></li><li><code>git</code> æ—¥å¸¸ä½¿ç”¨å‘½ä»¤ã€‚ <br><ul><li><code>git branch</code>: æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯</li><li><code>git baranch</code>: æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯ã€‚<br> <code>remotes/origin</code>ä¸ºè¿œç¨‹åˆ†æ”¯ã€‚</li><li><code>git branch -av</code>: æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯ä¸æœ€è¿‘çš„ä¸€æ¡æäº¤è®°å½•ã€‚</li><li><code>git branch -avv</code>: æŸ¥çœ‹åˆ†æ”¯ï¼Œä»¥åŠå…³è”çš„ä»“åº“</li><li><code>git remote show otigin</code>: æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯ç›´æ¥çš„å…³ç³»</li><li><code>git stauts</code>: æŸ¥çœ‹æœ¬åœ°ä»“åº“çŠ¶æ€</li><li><code>git diff</code>: æŸ¥çœ‹æ”¹åŠ¨å†…å®¹</li><li><code>git add .</code>: æ·»åŠ </li><li><code>git reset .</code>: æ’¤é”€æ·»åŠ </li><li><code>git commit -m &quot;æè¿°&quot;</code>: æäº¤æœ¬æ¬¡æ”¹åŠ¨</li><li><code>git commit -s</code></li><li><code>git log</code>: æŸ¥çœ‹æäº¤æ—¥å¿—</li><li><code>git push origin Head:main</code>: æäº¤è‡³è¿œç¨‹ä»“åº“</li><li><code>git pull - rebase</code>: ä¸‹æ‹‰ä»“åº“</li><li><code>git push</code>: æäº¤</li><li><code>git checkout -b V2</code>: åˆ›å»ºæœ¬åœ°åˆ†æ”¯ï¼Œå¹¶åˆ‡æ¢è‡³æ­¤åˆ†æ”¯</li><li><code>git checkout V2</code>: åˆ‡æ¢åˆ†æ”¯</li><li><code>git push origin V2:remote_branch_V2</code>:åˆ›å»ºè¿œç¨‹åˆ†æ”¯</li><li><code>git push origin :remote_branch_V2</code>:åˆ é™¤ã€‚pushç©ºå°±ç­‰äºåˆ é™¤</li><li><code>git checkout -b v2 origin/main</code>: æ‹‰å–åˆ†æ”¯å¹¶å»ºç«‹å…³ç³»</li><li><code>git config --global push.default upstream</code>: è®¾ç½®pushæ¨é€ä»£ç åˆ°æœ¬åœ°åˆ†æ”¯å…³è”çš„è¿œç¨‹åˆ†æ”¯</li></ul></li><li>æ’¤é”€æ“ä½œ<br><ul><li><code>git checkout</code> . // ä»£ç æ”¹åŠ¨åï¼Œæ’¤é”€æ‰€æœ‰æ”¹åŠ¨</li><li><code>git reset a</code> // git add a åï¼Œæ’¤é”€å¯¹açš„add</li><li><code>git reset .</code> // git add . åï¼Œæ’¤é”€addæ‰€æœ‰</li><li><code>git reset HEAD~1</code> // å·²ç»commitï¼Œåœ¨å½“å‰åˆ†æ”¯å›é€€1æ¡commitï¼Œå½“ç„¶2å°±æ˜¯2æ¡;å›é€€åä¿®æ”¹å†…å®¹è¿˜åœ¨æœ¬åœ°</li><li><code>git revert HEAD~1</code> //å·²ç»pushï¼Œå›æ»šè¿™æ¡è®°å½•ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯æ‰§è¡Œå®Œåéœ€è¦ç»§ç»­æ‰§è¡Œä»¥ä¸‹ä¸‰è¡Œæ‰å¯ä»¥ï¼Œå› ä¸ºè¿œç«¯ä¼šä¿ç•™revertè®°å½•<ol><li><code>git add .</code></li><li><code>git commit -a</code></li><li><code>git push</code></li></ol></li></ul></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;Git-å­¦ä¹ ç¬”è®°&quot;&gt;&lt;a href=&quot;#Git-å­¦ä¹ ç¬”è®°&quot; class=&quot;headerlink&quot; title=&quot;Git å­¦ä¹ ç¬”è®°&quot;&gt;&lt;/a&gt;Git å­¦ä¹ ç¬”è®°&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;git&lt;/code&gt; åŸºæœ¬ä»‹ç» &lt;br&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>MarkdownåŸºæœ¬è¯­æ³•.md</title>
    <link href="https://acgnliu.github.io/posts/116d0b7e.html"/>
    <id>https://acgnliu.github.io/posts/116d0b7e.html</id>
    <published>2022-10-16T08:48:58.000Z</published>
    <updated>2022-10-16T15:11:07.816Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Markdown-æ ‡é¢˜è¯­æ³•"><a href="#Markdown-æ ‡é¢˜è¯­æ³•" class="headerlink" title="Markdown æ ‡é¢˜è¯­æ³•"></a>Markdown æ ‡é¢˜è¯­æ³•</h1><p>1ã€åˆ›å»ºæ ‡é¢˜ï¼šåœ¨å†…å®¹æœ€å‰é¢æ·»åŠ â€œ#â€å¥½å°±å¯ä»¥åˆ›å»ºæ ‡é¢˜ï¼Œâ€œ#â€çš„æ•°é‡ä»£è¡¨è¿™æ ‡é¢˜çš„çº§åˆ«ã€‚å¦‚ä¸‹æ¼”ç¤º,æ³¨æ„ä¹¦å†™ # å†™è¿™æœ€å‰é¢ï¼Œç©ºä¸€è¡Œå†æ·»åŠ å†…å®¹ï¼Œä¸éœ€è¦åŠ åŒå¼•å·ã€‚</p><h2 id="â€œ-â€äºŒçº§æ ‡é¢˜"><a href="#â€œ-â€äºŒçº§æ ‡é¢˜" class="headerlink" title="â€œ##â€äºŒçº§æ ‡é¢˜"></a>â€œ##â€äºŒçº§æ ‡é¢˜</h2><h3 id="â€œ-â€ä¸‰çº§æ ‡é¢˜"><a href="#â€œ-â€ä¸‰çº§æ ‡é¢˜" class="headerlink" title="â€œ###â€ä¸‰çº§æ ‡é¢˜"></a>â€œ###â€ä¸‰çº§æ ‡é¢˜</h3><h4 id="â€œ-â€å››çº§æ ‡é¢˜"><a href="#â€œ-â€å››çº§æ ‡é¢˜" class="headerlink" title="â€œ####â€å››çº§æ ‡é¢˜"></a>â€œ####â€å››çº§æ ‡é¢˜</h4><h5 id="â€œ-â€äº”çº§æ ‡é¢˜"><a href="#â€œ-â€äº”çº§æ ‡é¢˜" class="headerlink" title="â€œ#####â€äº”çº§æ ‡é¢˜"></a>â€œ#####â€äº”çº§æ ‡é¢˜</h5><p>2ã€ä¹Ÿå¯ä»¥ä½¿ç”¨â€œ==â€åˆ›å»ºä¸€çº§æ ‡é¢˜ï¼Œâ€œâ€”â€åˆ›å»ºäºŒçº§æ ‡é¢˜ã€‚  </p><h1 id="ä¾‹å¦‚ï¼Œè¿™æ˜¯ä¸€çº§æ ‡é¢˜"><a href="#ä¾‹å¦‚ï¼Œè¿™æ˜¯ä¸€çº§æ ‡é¢˜" class="headerlink" title="ä¾‹å¦‚ï¼Œè¿™æ˜¯ä¸€çº§æ ‡é¢˜"></a>ä¾‹å¦‚ï¼Œè¿™æ˜¯ä¸€çº§æ ‡é¢˜</h1><h2 id="è¿™æ˜¯äºŒçº§æ ‡é¢˜"><a href="#è¿™æ˜¯äºŒçº§æ ‡é¢˜" class="headerlink" title="è¿™æ˜¯äºŒçº§æ ‡é¢˜"></a>è¿™æ˜¯äºŒçº§æ ‡é¢˜</h2><p>3ã€æ®µè½ä¸€ï¼š éœ€è¦æ•²ä¸¤æ¬¡å›è½¦ï¼Œæ¨èä¸è¦ä½¿ç”¨ç©ºæ ¼å’Œåˆ¶è¡¨ç¬¦ç¼©è¿›æ®µè½ï¼Œæœ€åä½¿ç”¨ç©ºç™½è¡Œéš”å¼€ã€‚</p><p>æ®µè½äºŒï¼š</p><p>4ã€æ¢è¡Œï¼Œåœ¨ä¸€è¡Œçš„æœ«å°¾æ·»åŠ ä¸¤ä¸ªæˆ–å¤šä¸ªç©ºæ ¼ï¼Œç„¶åæŒ‰å›è½¦é”®ã€‚<br>ä¹Ÿå¯ä»¥ä½¿ç”¨bræ¥æ¢è¡Œã€‚ä¾‹å¦‚ï¼š<br><br></p><h1 id="Markdown-å¼ºè°ƒè¯­æ³•"><a href="#Markdown-å¼ºè°ƒè¯­æ³•" class="headerlink" title="Markdown å¼ºè°ƒè¯­æ³•"></a>Markdown å¼ºè°ƒè¯­æ³•</h1><p>0ã€<em>æ–œä½“ï¼š</em>åœ¨å•è¯å‰åå„æ·»åŠ ä¸€ä¸ªæ˜Ÿå·â€œ<em>â€<br><br>1ã€<strong>ç²—ä½“ï¼ˆBoldï¼‰ï¼š</strong> åœ¨å•è¯å‰åå„æ·»åŠ ä¸¤ä¸ªæ˜Ÿå·â€œ<strong>â€å°±å¯ä»¥è®²æ˜Ÿå·ä¸­çš„å†…å®¹å˜ä¸ºç²—ä½“ã€‚<br><br>2ã€</strong></em>æ–œç²—ä½“(ltalic)ï¼š<strong><em> åœ¨å•è¯å‰åå„æ·»åŠ åŠ ä¸‰ä¸ªæ˜Ÿå·â€œ</em></strong>â€æˆ–è€…ä¸‰ä¸ªä¸‹åˆ’çº¿â€<strong><em>â€œ,ä¾‹å¦‚ï¼š</em></strong>æ–œç²—ä½“<em>_</em> .<br><br></p><h1 id="Markdown-å¼•ç”¨è¯­æ³•"><a href="#Markdown-å¼•ç”¨è¯­æ³•" class="headerlink" title="Markdown å¼•ç”¨è¯­æ³•"></a>Markdown å¼•ç”¨è¯­æ³•</h1><p>0ã€åˆ›å»ºå—å¼•ç”¨ï¼Œéœ€è¦åœ¨æ®µè½å‰æ·»åŠ ä¸€ä¸ª <strong>&gt;</strong> <br></p><blockquote><ul><li>è¿™æ˜¯ä¸€ä¸ªå—å¼•ç”¨ <br></li><li>ç¬¬äºŒè¡Œä¸éœ€è¦æ·»åŠ  <em>&gt;</em><blockquote><p>åµŒå¥—çš„å—å¼•ç”¨ï¼Œåœ¨æ®µè½å‰æ·»åŠ ä¸¤ä¸ªå³å¯ <strong>&gt;&gt;</strong> <br><br>ç¬¬äºŒè¡Œä¹Ÿä¸éœ€è¦æ·»åŠ   </p></blockquote></li></ul></blockquote><p>é€€å‡ºæŒ‰ä¸¤ä¸‹å›è½¦å³å¯ã€‚<br></p><h1 id="Markdown-åˆ—è¡¨è¯­æ³•"><a href="#Markdown-åˆ—è¡¨è¯­æ³•" class="headerlink" title="Markdown åˆ—è¡¨è¯­æ³•"></a>Markdown åˆ—è¡¨è¯­æ³•</h1><p>1ã€<strong>æœ‰åºåˆ—è¡¨</strong>ï¼šæ¯æ®µå‰åŠ ä¸Šâ€œ1.â€å°±å¯ä»¥äº†ï¼Œæ¯ä¸ªåˆ—è¡¨é¡¹å‰æ·»åŠ æ•°å­—å¹¶ç´§è·Ÿç€ä¸€ä¸ªè‹±æ–‡å¥ç‚¹ã€‚æ•°å­—ä¸ç”¨è¿ç»­ä½†å¿…é¡»ä»¥ 1 å¼€å¤´ã€‚</p><ol><li>æœ‰åºåˆ—è¡¨ 1</li><li>æœ‰åºåˆ—è¡¨ 2</li><li>æœ‰åºåˆ—è¡¨ 3</li></ol><p>2ã€<strong>æ— åºåˆ—è¡¨</strong>ï¼šåœ¨æ¯ä¸ªåˆ—è¡¨å‰æ·»åŠ ç ´æŠ˜å·â€œ-â€ï¼Œæ˜Ÿå·â€œ*â€ï¼ŒåŠ å·â€œ+â€ã€‚ç¼©è¿›ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—è¡¨é¡¹å¯åˆ›å»ºåµŒå¥—åˆ—è¡¨ã€‚</p><ul><li>æ— åºåˆ—è¡¨ 1</li><li>æ— åºåˆ—è¡¨ 2<ul><li>æ— åºåˆ—è¡¨åµŒå¥— 1</li><li>æ— åºåˆ—è¡¨åµŒå¥— 2<br>éæ— åºåˆ—è¡¨</li></ul></li><li>æ— åºåˆ—è¡¨ 3<br>  éæ— åºåˆ—è¡¨</li></ul><p>3ã€<strong>ä»£ç å—</strong>ï¼š é€šå¸¸é‡‡ç”¨å››ä¸ªç©ºæ ¼æˆ–è€…ä¸€ä¸ªåˆ¶è¡¨ç¬¦ï¼Œå½“ç»“åˆåˆ—è¡¨ä½¿ç”¨æ—¶éœ€è¦å…«ä¸ªåˆ—è¡¨å—æˆ–ä¸¤ä¸ªåˆ¶è¡¨ç¬¦ã€‚</p><pre><code>å¦‚è¿™æ˜¯ä¸€ä¸ªä»£ç å— æ¢è¡Œç›´æ¥å›è½¦å°±å¯ä»¥ã€‚</code></pre><p>ä¸¤ä¸‹å›è½¦é€€å‡ºä»£ç å—ã€‚</p><ul><li><p>åœ¨åˆ—è¡¨ä¸­åµŒå¥—ä»£ç å—</p><pre><code>  ä¾‹å­,åŒç¼©è¿›æ’å…¥å›¾ç‰‡å¤±è´¥ï¼ˆæ»‘ç¨½ï¼‰</code></pre><p>  <img src="https://images.alphacoders.com/846/84631.jpg" alt="images"></p></li></ul><h1 id="Markdown-ä»£ç è¯­æ³•"><a href="#Markdown-ä»£ç è¯­æ³•" class="headerlink" title="Markdown ä»£ç è¯­æ³•"></a>Markdown ä»£ç è¯­æ³•</h1><p>1ã€è½¬ä¹‰åå¼•å·ï¼šå¯ä»¥å°†å•è¯æˆ–è€…çŸ­è¯­åŒ…å«è¿›å»ï¼Œä¾‹å¦‚ï¼ˆ<code>Hello,Markdown</code>ï¼‰</p><p>2ã€ä»£ç å—ï¼š é¦–å°¾å„ä¸‰ä¸ªè½¬ä¹‰åå¼•å·ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Hello python&quot;</span>)</span><br></pre></td></tr></table></figure><h1 id="Markdown-é“¾æ¥è¯­æ³•ï¼š"><a href="#Markdown-é“¾æ¥è¯­æ³•ï¼š" class="headerlink" title="Markdown é“¾æ¥è¯­æ³•ï¼š"></a>Markdown é“¾æ¥è¯­æ³•ï¼š</h1><p>1ã€è¿™æ˜¯ä¸€ä¸ªé“¾æ¥ <a href="https://markdown.com.cn">Markdownè¯­æ³•</a></p><p>2ã€ç»™é“¾æ¥å¢åŠ  Title, é¼ æ ‡æ‚¬åœåœ¨é“¾æ¥ä¸Šä¼šæ˜¾ç¤ºæ–‡å­—ã€‚</p><p>è¿™æ˜¯ä¸€ä¸ªé“¾æ¥ <a href="https://coding.net/help/docs/ci/lint/markdown-code-lang.html" title="Markdown ä»£ç å—ç¼–ç¨‹è¯­è¨€æ¸…å•">Markdownè¯­æ³•</a></p><p>3ã€ç½‘å€å’ŒEmailåœ°å€ï¼Œä½¿ç”¨å°–æ‹¬å·å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æŠŠURLæˆ–è€…emailåœ°å€å˜æˆå¯ç‚¹å‡»çš„é“¾æ¥</p><p>åšå®¢åœ°å€ï¼š <a href="https://liuixngyuvs.top">https://liuixngyuvs.top</a></p><p>é‚®ç®±ï¼š <a href="&#x6d;&#x61;&#105;&#x6c;&#116;&#111;&#x3a;&#x66;&#97;&#x6b;&#101;&#x40;&#101;&#120;&#97;&#109;&#112;&#x6c;&#101;&#46;&#x63;&#x6f;&#x6d;">&#x66;&#97;&#x6b;&#101;&#x40;&#101;&#120;&#97;&#109;&#112;&#x6c;&#101;&#46;&#x63;&#x6f;&#x6d;</a></p><p>4ã€å¸¦æ ¼å¼åŒ–çš„é“¾æ¥ï¼šå¼ºè°ƒé“¾æ¥ï¼Œåœ¨é“¾æ¥è¯­æ³•å‰åå¢åŠ æ˜Ÿå·ã€‚å°†é“¾æ¥è¡¨ç¤ºä¸ºä»£ç ï¼Œåœ¨æ–¹æ‹¬å·ä¸­æ·»åŠ åå¼•å·ã€‚</p><p>I love supporting the <strong><a href="https://eff.org">EFF</a></strong></p><p>This is the <em><a href="https://www.markdownguide.org">Markdown Guide</a></em></p><p>See the section on <a href="#code"><code>code</code></a></p><p>5ã€å¼•ç”¨ç±»å‹é“¾æ¥ï¼šä¸€ç§ç‰¹æ®Šçš„é“¾æ¥ï¼Œä½¿URLåœ¨Markdownä¸­æ›´å®¹æ˜“æ˜¾ç¤ºä¸é˜…è¯»ï¼Œæœ‰ä¸¤ç§æ ¼å¼ã€‚</p><ol><li>é“¾æ¥çš„ç¬¬ä¸€éƒ¨åˆ†æ ¼å¼ï¼šä½¿ç”¨ä¸¤ç»„æ‹¬å·è¿›è¡Œæ ¼å¼è®¾ç½®ï¼Œç¬¬ä¸€ç»„æ‹¬å·æ˜¾ç¤ºä¸ºé“¾æ¥çš„æ–‡æœ¬ï¼Œç¬¬äºŒç»„æ‹¬å·æ˜¾ç¤ºä¸ºä¸€ä¸ªæ ‡ç­¾ã€‚æ­¤æ ‡ç­¾ç”¨äºæŒ‡å‘å­˜å‚¨åœ¨æ–‡ä»¶ä¸­çš„å…¶ä»–ä½ç½®çš„é“¾æ¥ã€‚<ul><li>[hobbit-hole][1]</li><li>[hobbit-hole] [1]</li></ul></li><li>é“¾æ¥çš„ç¬¬äºŒéƒ¨åˆ†æ ¼å¼ï¼šæ”¾åœ¨æ‹¬å·ä¸­çš„æ ‡ç­¾ï¼Œå…¶åç´§è·Ÿç€ä¸€ä¸ªå†’å·å’Œè‡³å°‘ä¸€ä¸ªç©ºæ ¼ ä¾‹å¦‚<code>[label: ]</code>;é“¾æ¥çš„URLå¯é€‰æ‹©å°†å…¶æ‹¬åœ¨åŒå¼•å·ä¹‹ä¸­ï¼›é“¾æ¥çš„å¯é€‰æ ‡é¢˜ï¼Œå¯ä»¥å°†å…¶æ‹¬åœ¨åŒå¼•å·ä¸­ã€å•å¼•å·æˆ–è€…æ‹¬å·ä¸­ã€‚<ul><li>[1]: htpps://en.wikipedia.org/wiki/Hobbit#Lifestyle</li><li>[1]: htpps://en.wikipedia.org/wiki/Hobbit#Lifestyle â€œHobbit lifestylesâ€</li><li>[1]: htpps://en.wikipedia.org/wiki/Hobbit#Lifestyle â€˜Hobbit lifestylesâ€™</li><li>[1]: htpps://en.wikipedia.org/wiki/Hobbit#Lifestyle (Hobbit lifestyles)</li><li>[1]: <a href="htpps://en.wikipedia.org/wiki/Hobbit#Lifestyle">htpps://en.wikipedia.org/wiki/Hobbit#Lifestyle</a> (Hobbit lifestyles)</li></ul></li></ol><h2 id="Markdown-å›¾ç‰‡è¯­æ³•"><a href="#Markdown-å›¾ç‰‡è¯­æ³•" class="headerlink" title="Markdown å›¾ç‰‡è¯­æ³•"></a>Markdown å›¾ç‰‡è¯­æ³•</h2><p>1ã€ç•¥</p><p>2ã€é“¾æ¥å›¾ç‰‡ï¼š</p><pre><code>- [![æ²™æ¼ ä¸­çš„å²©çŸ³å›¾ç‰‡](https://markdown.com.cn/assets/img/shiprock.c3b9a023.jpg &quot;Shiprock&quot;)](https://markdown.com.cn)</code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Markdown-æ ‡é¢˜è¯­æ³•&quot;&gt;&lt;a href=&quot;#Markdown-æ ‡é¢˜è¯­æ³•&quot; class=&quot;headerlink&quot; title=&quot;Markdown æ ‡é¢˜è¯­æ³•&quot;&gt;&lt;/a&gt;Markdown æ ‡é¢˜è¯­æ³•&lt;/h1&gt;&lt;p&gt;1ã€åˆ›å»ºæ ‡é¢˜ï¼šåœ¨å†…å®¹æœ€å‰é¢æ·»åŠ â€œ#â€å¥½å°±å¯ä»¥åˆ›å»ºæ ‡é¢˜</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>ç¬¬ä¸€ç¯‡æ–‡ç« </title>
    <link href="https://acgnliu.github.io/posts/5c2fafc7.html"/>
    <id>https://acgnliu.github.io/posts/5c2fafc7.html</id>
    <published>2022-09-03T12:36:42.000Z</published>
    <updated>2023-03-16T13:26:33.946Z</updated>
    
    <content type="html"><![CDATA[<div class="tip info"><p>å‚è€ƒåšå®¢æ•™ç¨‹é“¾æ¥:</p></div><div class="tip bolt"><p>åšä¸»ï¼š å®‰çŸ¥é±¼<br>    é“¾æ¥ï¼š <a href="https://anzhiy.cn/posts/sdxhu.html">https://anzhiy.cn/posts/sdxhu.html</a><br>    bilibili: <a href="https://www.bilibili.com/video/BV1CG41157fr/?spm_id_from=pageDriver&amp;vd_source=cde63aff900a4e125307eefbea7e6079">https://www.bilibili.com/video/BV1CG41157fr/?spm_id_from=pageDriver&amp;vd_source=cde63aff900a4e125307eefbea7e6079</a></p></div>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;tip info&quot;&gt;&lt;p&gt;å‚è€ƒåšå®¢æ•™ç¨‹é“¾æ¥:&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;tip bolt&quot;&gt;&lt;p&gt;åšä¸»ï¼š å®‰çŸ¥é±¼&lt;br&gt;    é“¾æ¥ï¼š &lt;a href=&quot;https://anzhiy.cn/posts/sdxhu.html&quot;&gt;https</summary>
      
    
    
    
    
  </entry>
  
</feed>
